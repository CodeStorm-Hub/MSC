<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Software Requirements Specification - MSC Home Platform</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Mermaid.js for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'brand-dark': '#0b1220',
                        'brand-darker': '#070d18',
                        'brand-blue': '#0f1724',
                        'brand-accent': '#1a2a44',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Print-specific page setup for A4 */
        @page {
            size: A4 portrait;
            margin: 15mm 18mm 20mm 18mm;
        }
        
        /* Print media styles */
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                margin: 0;
                padding: 0;
            }
            
            .no-print {
                display: none !important;
            }
            
            .page-break {
                page-break-after: always;
                break-after: page;
            }
            
            .avoid-break {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            
            .section {
                page-break-before: auto;
            }
            
            thead {
                display: table-header-group;
            }
            
            tbody {
                display: table-row-group;
            }
            
            tr {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            
            h1, h2, h3, h4, h5, h6 {
                page-break-after: avoid;
                break-after: avoid;
            }
            
            .a4-container {
                box-shadow: none;
                max-width: none;
                border-radius: 0;
            }
            
            .print-bg {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            .mermaid {
                page-break-inside: avoid;
            }
        }
        
        /* Screen display styles */
        @media screen {
            body {
                background: radial-gradient(120% 140% at 0% 0%, #1a2a44 0%, #0f1724 45%, #070d18 100%);
                padding: 2rem 1rem;
                min-height: 100vh;
            }
            
            .a4-container {
                max-width: 210mm;
                margin: 0 auto;
                background: white;
                box-shadow: 0 22px 80px rgba(2, 6, 23, 0.55);
                border-radius: 8px;
                overflow: hidden;
            }
        }
        
        /* Custom styles */
        .a4-page {
            padding: 2.5rem;
            background: white;
        }
        
        .header-logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .header-logo svg {
            width: 48px;
            height: 48px;
        }
        
        /* Typography */
        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1.5rem;
            color: #1e40af;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 0.5rem;
        }
        
        h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1.25rem;
            color: #1e3a8a;
            border-bottom: 2px solid #60a5fa;
            padding-bottom: 0.4rem;
        }
        
        h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 1.75rem;
            margin-bottom: 1rem;
            color: #1e40af;
        }
        
        h4 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.875rem;
            color: #2563eb;
        }
        
        h5 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-top: 1.25rem;
            margin-bottom: 0.75rem;
            color: #3b82f6;
        }
        
        h6 {
            font-size: 1rem;
            font-weight: 600;
            margin-top: 1rem;
            margin-bottom: 0.625rem;
            color: #60a5fa;
        }
        
        p {
            margin-bottom: 1rem;
            line-height: 1.7;
            color: #374151;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
        }
        
        ul {
            list-style-type: disc;
        }
        
        ol {
            list-style-type: decimal;
        }
        
        li {
            margin-bottom: 0.5rem;
            line-height: 1.7;
            color: #374151;
        }
        
        ul ul, ol ul {
            list-style-type: circle;
        }
        
        ul ul ul, ol ul ul {
            list-style-type: square;
        }
        
        /* Tables */
        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 1.5rem 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.875rem;
        }
        
        thead {
            background-color: #eff6ff;
        }
        
        th {
            background-color: #dbeafe;
            border: 1px solid #93c5fd;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: #1e40af;
        }
        
        td {
            border: 1px solid #e5e7eb;
            padding: 0.75rem;
            color: #374151;
        }
        
        tbody tr:nth-child(even) {
            background-color: #f9fafb;
        }
        
        tbody tr:hover {
            background-color: #f3f4f6;
        }
        
        /* Code */
        code {
            background-color: #f1f5f9;
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875em;
            color: #dc2626;
        }
        
        pre {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 1rem;
            margin: 1.5rem 0;
            background-color: #eff6ff;
            padding: 1rem;
            border-radius: 0.25rem;
            color: #1e40af;
        }
        
        /* Mermaid diagrams */
        .mermaid {
            margin: 2rem 0;
            display: flex;
            justify-content: center;
            background-color: #f9fafb;
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid #e5e7eb;
        }
        
        /* TOC */
        .toc {
            background-color: #f9fafb;
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin: 2rem 0;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc > ul > li {
            margin-bottom: 0.75rem;
        }
        
        .toc ul ul {
            padding-left: 1.5rem;
            margin-top: 0.5rem;
        }
        
        .toc a {
            color: #2563eb;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .toc a:hover {
            color: #1d4ed8;
            text-decoration: underline;
        }
        
        /* Strong/Bold */
        strong {
            font-weight: 600;
            color: #111827;
        }
        
        /* Links */
        a {
            color: #2563eb;
            text-decoration: none;
        }
        
        a:hover {
            color: #1d4ed8;
            text-decoration: underline;
        }
        
        /* Horizontal rule */
        hr {
            border: none;
            border-top: 2px solid #e5e7eb;
            margin: 2rem 0;
        }
        
        /* Print button */
        .print-button {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            font-weight: 700;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-size: 1.125rem;
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }
        
        .print-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(59, 130, 246, 0.4);
        }
    </style>
</head>
<body>
    <div class="a4-container">
        <!-- Cover Page -->
        <div class="a4-page page-break print-bg" style="background: linear-gradient(135deg, #0b1220 0%, #1a2a44 100%); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh;">
            <div class="text-center space-y-8">
                <!-- Logo -->
                <div class="flex justify-center mb-8">
                    <div class="header-logo text-white">
                        <svg class="opacity-60" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M8.21192 3.09155C8.40164 2.95736 8.66555 2.96958 8.8418 3.13452C9.01806 3.29976 9.04853 3.56338 8.92676 3.76148L8.86524 3.84155L5.43555 7.49976L8.86524 11.158L8.92676 11.238C9.04853 11.4361 9.01806 11.6998 8.8418 11.865C8.66555 12.0299 8.40164 12.0422 8.21192 11.908L8.13477 11.8416L4.38477 7.84155C4.20487 7.64932 4.20487 7.35019 4.38477 7.15796L8.13477 3.15796L8.21192 3.09155Z"/></svg>
                        <svg viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M8.15623 0.136828C8.29885 0.0017736 8.5108 -0.038992 8.69627 0.0401498C8.90813 0.130807 9.03093 0.354826 8.99314 0.582135L8.08983 6.00004H12.4999C12.6893 6.00004 12.8625 6.10703 12.9472 6.2764C13.0318 6.44567 13.0137 6.64836 12.9003 6.79983L6.90039 14.7997C6.76218 14.984 6.51554 15.0503 6.30372 14.9599C6.09185 14.8692 5.96904 14.6452 6.00685 14.4179L6.91016 9H2.50005C2.31067 9 2.13749 8.89303 2.05279 8.72364C1.96818 8.55437 1.98625 8.35167 2.09967 8.20021L8.09959 0.200304L8.15623 0.136828ZM3.50004 8.00001H7.49999C7.64696 8.00001 7.78682 8.06464 7.88182 8.17677C7.9767 8.28885 8.01724 8.43718 7.99315 8.58204L7.33007 12.5586L11.4999 7.00003H7.49999C7.35302 7.00003 7.21316 6.93541 7.11816 6.82327C7.02329 6.71118 6.98274 6.56286 7.00683 6.418L7.66894 2.44051L3.50004 8.00001Z"/></svg>
                        <svg class="opacity-60" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M6.15879 11.8651C6.36026 12.0536 6.67706 12.043 6.86582 11.8416L10.6158 7.84162C10.7957 7.64939 10.7957 7.35026 10.6158 7.15803L6.86582 3.15803L6.78868 3.09162C6.59895 2.95743 6.33504 2.96965 6.15879 3.13459C5.98254 3.29983 5.95206 3.56345 6.07383 3.76155L6.13535 3.84162L9.56407 7.49983L6.13535 11.158C5.94681 11.3595 5.95745 11.6763 6.15879 11.8651Z"/></svg>
                    </div>
                </div>
                
                <h1 style="font-size: 3rem; font-weight: 700; margin-bottom: 1rem; border: none; color: white;">Software Requirements Specification</h1>
                <h2 style="font-size: 2.5rem; font-weight: 600; color: #bfdbfe; border: none;">MSC Home Rental & Real Estate Platform</h2>
                
                <div style="margin-top: 4rem;">
                    <p style="margin-bottom: 1rem; color: white;"><strong>Document ID:</strong> SRS_MSC_HOME_2026</p>
                    <p style="margin-bottom: 1rem; color: white;"><strong>Prepared By:</strong> CodeStorm Hub Development Team</p>
                    <p style="margin-bottom: 1rem; color: white;"><strong>Date:</strong> January 2026</p>
                    <p style="margin-bottom: 1rem; color: white;"><strong>Status:</strong> Review</p>
                </div>
                
                <div style="margin-top: 4rem;">
                    <p style="font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.1em; color: #bfdbfe;">CodeStorm Hub</p>
                    <p style="font-size: 0.75rem; color: #9ca3af; margin-top: 0.5rem;">Open Source Collective</p>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="a4-page">
            <h1 id="software-requirements-specification">Software Requirements Specification</h1>
<h1 id="msc-home-rental-real-estate-platform">MSC Home Rental &amp; Real Estate Platform</h1>
<hr />
<p><strong>Document ID:</strong> SRS_MSC_HOME_2026<br />
<strong>Prepared By:</strong> CodeStorm Hub Development Team<br />
<strong>Date:</strong> January 2026<br />
<strong>Status:</strong> Review</p>
<hr />
<h2 id="executive-summary">Executive Summary</h2>
<p>MSC Home Rental &amp; Real Estate Platform is a comprehensive digital solution designed to revolutionize Bangladesh's real estate market by providing a secure, verified, and transparent environment for property transactions. This Software Requirements Specification (SRS) document defines all functional and non-functional requirements necessary for successful development and deployment of the platform.</p>
<h3 id="key-platform-features">Key Platform Features</h3>
<ul>
<li><strong>Verified Marketplace:</strong> Identity verification, professional badges, and listing authentication</li>
<li><strong>Complete Transaction Workflow:</strong> From property search to deal closure with legal and financial support</li>
<li><strong>Bangladesh-Specific Integration:</strong> Support for Bayna, Dalil, Namjari, and government portal workflows</li>
<li><strong>Secure Payments:</strong> Multi-gateway integration with buyer protection mechanisms</li>
<li><strong>Communication Suite:</strong> In-platform chat, audio/video, and appointment scheduling</li>
<li><strong>Professional Network:</strong> Connect buyers, sellers, agents, legal advisors, and financial institutions</li>
</ul>
<h3 id="target-users">Target Users</h3>
<ul>
<li>Property Buyers and Renters</li>
<li>Property Sellers and Landlords</li>
<li>URA-certified Real Estate Agents</li>
<li>Legal Advisors and Law Firms</li>
<li>Financial Institutions and Loan Providers</li>
<li>Service Providers (Architects, Designers, etc.)</li>
</ul>
<h3 id="technical-scope">Technical Scope</h3>
<ul>
<li>Web Application (Responsive Design)</li>
<li>Mobile Applications (Android &amp; iOS)</li>
<li>Admin Dashboard and Moderation Tools</li>
<li>Integration with Payment Gateways, Maps, eKYC providers, and Government Portals</li>
</ul>
<hr />
<blockquote>
<p><strong>Note:</strong> This document consolidates requirements based on market research, user studies, and Bangladesh real estate industry best practices. All requirements have been validated for technical feasibility and business value.</p>
</blockquote>
<h2 id="table-of-contents">Table of Contents</h2>
<h3 id="1-introduction">1. Introduction</h3>
<ul>
<li>1.1 Purpose</li>
<li>1.2 Scope</li>
<li>1.3 Definitions (Bangladesh Context)</li>
</ul>
<h3 id="2-product-overview">2. Product Overview</h3>
<ul>
<li>2.1 Problem Summary</li>
<li>2.2 Product Vision</li>
<li>2.3 Research Signals (Market Validation)</li>
</ul>
<h3 id="3-stakeholders-user-actors">3. Stakeholders &amp; User Actors</h3>
<ul>
<li>3.1 Primary Actors</li>
<li>3.2 Secondary Actors</li>
<li>3.3 Roles &amp; Permissions (RBAC + Relationship-Based Access)</li>
</ul>
<h3 id="4-personas">4. Personas</h3>
<ul>
<li>4.1 Seller Persona (Rakib Hasan)</li>
<li>4.2 Buyer Persona (Sumaiya Akter)</li>
<li>4.3 Agent Persona</li>
</ul>
<h3 id="5-system-modules-scope">5. System Modules &amp; Scope</h3>
<ul>
<li>Authentication &amp; Account Management</li>
<li>User Profile &amp; Verification</li>
<li>Marketplace &amp; Listings</li>
<li>Communication &amp; Appointments</li>
<li>Transaction Management</li>
<li>Payment Integration</li>
<li>Legal &amp; Financial Support</li>
<li>Admin &amp; Moderation</li>
</ul>
<h3 id="6-assumptions-constraints-dependencies">6. Assumptions, Constraints, Dependencies</h3>
<ul>
<li>6.1 Assumptions</li>
<li>6.2 Constraints</li>
<li>6.3 Dependencies</li>
</ul>
<h3 id="7-functional-requirements-fr-1-to-fr-93">7. Functional Requirements (FR-1 to FR-93)</h3>
<ul>
<li>7.1 Authentication &amp; Account (FR-1 to FR-4)</li>
<li>7.2 User Profile &amp; Professional Data (FR-5 to FR-7)</li>
<li>7.3 Verification &amp; Trust (FR-8 to FR-11)</li>
<li>7.4 Listings &amp; Media (FR-12 to FR-18)</li>
<li>7.5 Search &amp; Discovery (FR-19 to FR-22)</li>
<li>7.6 Communication &amp; Appointments (FR-23 to FR-26)</li>
<li>7.7 Offers, Orders, Transactions (FR-27 to FR-32)</li>
<li>7.8 Payments (FR-33 to FR-35)</li>
<li>7.9 Legal Support (FR-36 to FR-38)</li>
<li>7.10 Financial Support (FR-39 to FR-40)</li>
<li>7.11 Reviews &amp; Reputation (FR-41 to FR-43)</li>
<li>7.12 Notifications (FR-44 to FR-45)</li>
<li>7.13 Community + Content (FR-46 to FR-49) [P2]</li>
<li>7.14 Admin/Moderation (FR-50 to FR-51)</li>
<li>7.15 Transparency, Guides, and FAQs (FR-52 to FR-55)</li>
<li>7.16 Safety, Abuse Reporting, and Disputes (FR-56 to FR-57)</li>
<li>7.17 Real Estate Company / Project Listings (FR-58 to FR-59)</li>
<li>7.18 Monetization &amp; Billing (FR-60 to FR-61)</li>
<li>7.19 Service Provider Marketplace (FR-62 to FR-65)</li>
<li>7.20 Government Land Portals (FR-66 to FR-69)</li>
<li>7.21 Payment Gateway Integration (FR-70 to FR-74)</li>
<li>7.22 Operational &amp; Safety Requirements (FR-75 to FR-93)</li>
</ul>
<h3 id="8-business-rules-br-1-to-br-43">8. Business Rules (BR-1 to BR-43)</h3>
<ul>
<li>8.1 Verification (BR-1 to BR-4)</li>
<li>8.2 Accuracy Score (BR-5 to BR-7)</li>
<li>8.3 Cost Transparency (BR-8 to BR-9)</li>
<li>8.4 Offers/Transactions (BR-10 to BR-14)</li>
<li>8.5 Payments (BR-15 to BR-17)</li>
<li>8.6 Buyer Protection / Disputes (BR-18 to BR-19)</li>
<li>8.7 Reviews (BR-20 to BR-21)</li>
<li>8.8 Service Provider Marketplace (BR-22 to BR-23)</li>
<li>8.9 Payment Gateway Validation &amp; Risk (BR-24 to BR-27)</li>
<li>8.10 Listing Lifecycle &amp; Moderation (BR-28 to BR-31)</li>
<li>8.11 Document Vault Access Policy (BR-32 to BR-35)</li>
<li>8.12 Messaging Safety &amp; Abuse Handling (BR-36 to BR-38)</li>
<li>8.13 Notifications (BR-39 to BR-40)</li>
<li>8.14 Cancellations, Refunds, and Holds (BR-41 to BR-43)</li>
</ul>
<h3 id="9-user-stories-real-life-scenarios">9. User Stories &amp; Real-Life Scenarios</h3>
<ul>
<li>9.1 Buyer Stories (US-B1 to US-B7)</li>
<li>9.2 Seller / Agent Stories (US-S1 to US-S5)</li>
<li>9.3 Legal Agent Stories (US-L1)</li>
<li>9.4 Admin / Verifier Stories (US-A1 to US-A2)</li>
<li>9.5 User Story Summary Matrix</li>
</ul>
<h3 id="10-data-requirements">10. Data Requirements</h3>
<ul>
<li>10.1 Core Entities (MVP)</li>
<li>10.2 Bangladesh-Specific Document Types</li>
<li>10.3 Additional Entities / Tables</li>
</ul>
<h3 id="11-entity-relationship-diagrams-erd">11. Entity Relationship Diagrams (ERD)</h3>
<ul>
<li>11.1 Core Marketplace ERD</li>
<li>11.2 Extended Operational ERD</li>
<li>11.3 Auth, Social Login &amp; Credentials ERD</li>
<li>11.4 Community, Contacts &amp; Content ERD [P2]</li>
</ul>
<h3 id="12-transaction-step-tracking">12. Transaction Step Tracking</h3>
<ul>
<li>12.1 Offer State Machine</li>
<li>12.2 Transaction State Machine (Buy/Sell)</li>
<li>12.3 Transaction State Machine (Rent)</li>
<li>12.4 Bangladesh Transaction Step Checklist (Bayna → Dalil → Namjari → Tax)</li>
</ul>
<h3 id="13-diagrams-erdstatesequenceflowarchitecture">13. Diagrams (ERD/State/Sequence/Flow/Architecture)</h3>
<ul>
<li>13.1 Listing Lifecycle State Diagram</li>
<li>13.2 Verification Flow Sequence Diagram</li>
<li>13.3 Payment Flow with OTP/3DS</li>
<li>13.4 System Context (External Integrations)</li>
<li>13.5 Hosted Checkout + IPN + Validation</li>
<li>13.6 Dispute Lifecycle State Diagram</li>
<li>13.7 Document Vault Access Decision Flow</li>
<li>13.8 Notification Delivery Sequence</li>
<li>13.9 Portal Tracking Assistance (Manual Link-Out)</li>
<li>13.10 Use Case Diagram - Core Platform Features</li>
<li>13.11 High-Level Architecture Diagram</li>
<li>13.12 Data Flow Diagram - Property Search &amp; Transaction</li>
<li>13.13 Component Interaction Diagram - Verification Flow</li>
<li>13.14 Deployment Architecture Diagram</li>
</ul>
<h3 id="14-non-functional-requirements-nfr">14. Non-Functional Requirements (NFR)</h3>
<ul>
<li>14.1 Security</li>
<li>14.2 Performance</li>
<li>14.3 Reliability</li>
<li>14.4 Privacy</li>
<li>14.5 Accessibility &amp; Localization</li>
</ul>
<h3 id="15-appendices-traceability-glossary-standards">15. Appendices (Traceability, Glossary &amp; Standards)</h3>
<ul>
<li>15.1 Technical Standards &amp; Compliance</li>
<li>15.2 External References &amp; Resources</li>
<li>15.3 Glossary of Terms (40+ terms)</li>
<li>15.4 Approval &amp; Sign-Off</li>
</ul>
<hr />
<h2 id="1-introduction_1">1. Introduction</h2>
<h3 id="11-purpose">1.1 Purpose</h3>
<p>Define comprehensive, implementable requirements for <strong>MSC Home Rental &amp; Real Estate</strong>, a verified property marketplace for Bangladesh that includes <strong>communication</strong>, <strong>legal &amp; financial support</strong>, <strong>secure payments</strong>, and <strong>reputation-based trust</strong>.</p>
<h3 id="12-scope">1.2 Scope</h3>
<p>MSC Home supports (MVP-first):<br />
- Account creation + professional mode switching<br />
- Identity + professional verification (badges)<br />
- Verified property listings + listing <strong>Accuracy Score</strong><br />
- Advanced search + map-based search + favorites<br />
- In-platform chat + audio/video + appointment booking<br />
- Offers/negotiation → order → payment → transaction tracking<br />
- Legal support directory + booking/case tracking (MVP: manual workflow supported)<br />
- Financial/loan support directory + requests (MVP: lead workflow supported)<br />
- Post-transaction ratings/reviews</p>
<p>Deferred / optional (P2):<br />
- Community features (groups/pages/posts)<br />
- Blogs/videos publishing (moderated)</p>
<h3 id="13-definitions-bd-context">1.3 Definitions (BD-context)</h3>
<ul>
<li><strong>Accuracy Score:</strong> Completeness score shown on listings; computed from required/optional field completeness.</li>
<li><strong>Verified Badge:</strong> Profile indicator after successful verification approval.</li>
<li><strong>Verified Listing:</strong> A listing marked verified after ownership + information verification checks.</li>
<li><strong>Bayna / Baina Nama:</strong> Sale agreement / agreement to sell, commonly used in Bangladesh property transactions.</li>
<li><strong>Dalil:</strong> Registered deed at the Sub-Registrar office.</li>
<li><strong>Namjari (Mutation):</strong> Mutation process updating ownership records.</li>
<li><strong>RBAC:</strong> Role-based access control.</li>
<li><strong>KYC/eKYC:</strong> Identity verification.</li>
</ul>
<hr />
<h2 id="2-product-overview_1">2. Product Overview</h2>
<h3 id="21-problem-summary">2.1 Problem Summary</h3>
<p>Bangladesh’s real estate market suffers from:<br />
- Low trust, hidden property details, unfair pricing<br />
- Difficulty verifying legal papers / seriousness of parties<br />
- Loan affordability constraints<br />
- Incomplete online information and poor advertising</p>
<h3 id="22-product-vision">2.2 Product Vision</h3>
<p>MSC Home provides a secure, verified, transparent environment for buyers/sellers/agents/companies and integrates legal + financial partners for safer, faster transactions.</p>
<h3 id="23-research-signals-cross-validated-from-slides-ocr">2.3 Research Signals (Cross-validated from Slides OCR)</h3>
<p>From the case study survey/journey artifacts:<br />
- <strong>Advanced Search</strong> demand: <strong>97.6%</strong><br />
- Importance of <strong>trustworthiness</strong>: <strong>78.3%</strong><br />
- Interest in <strong>affordable loans</strong>: <strong>90.4%</strong><br />
- Interest in <strong>secure payments</strong>: <strong>69.9%</strong><br />
- Desire to <strong>rate buyers/sellers</strong> after transaction: <strong>95.2%</strong></p>
<p>Feature-preference breakdown:<br />
- Secure payments: <strong>69.9%</strong><br />
- Affordable loans: <strong>37.3%</strong><br />
- Legal support: <strong>27.7%</strong><br />
- Virtual tours: <strong>24.1%</strong></p>
<p>Implication: the MVP must strongly prioritize <strong>search</strong>, <strong>verification/trust</strong>, <strong>payments</strong>, and <strong>post-transaction reviews</strong>.</p>
<hr />
<h2 id="3-stakeholders-user-actors_1">3. Stakeholders &amp; User Actors</h2>
<h3 id="31-primary-actors">3.1 Primary Actors</h3>
<ol>
<li>Buyer</li>
<li>Renter</li>
<li>Seller / Owner (flat owner, land owner)</li>
<li>Real Estate Agent / Broker (<strong>including URA-certified agent where applicable</strong>)</li>
<li>Legal Agent (Lawyer / Law firm)</li>
<li>Financial Agent / Financial Institute (banks/NBFIs/loan partners)</li>
<li>Service Provider (architect, interior/exterior designer, electrician, surveyor, etc.)</li>
<li>Social User (community-only)</li>
</ol>
<h3 id="32-secondary-actors">3.2 Secondary Actors</h3>
<ol>
<li>Admin</li>
<li>Verifier / Moderator</li>
<li>Customer Support</li>
<li>Field Verifier (in-person property verification)</li>
<li>Credential Issuer / Institute (financial and non-financial)</li>
</ol>
<h3 id="33-roles-permissions-rbac-relationship-based-access">3.3 Roles &amp; Permissions (RBAC + Relationship-Based Access)</h3>
<p>MSC Home uses:<br />
- <strong>RBAC</strong> for coarse permissions (what a role <em>may</em> do)<br />
- <strong>ABAC / relationship checks</strong> for fine permissions (what a user <em>may do to a specific resource</em>)</p>
<h4 id="331-role-catalog">3.3.1 Role catalog</h4>
<ul>
<li><strong>Guest:</strong> not logged in.</li>
<li><strong>User (Consumer):</strong> logged in buyer/renter/seller (non-professional).</li>
<li><strong>Professional:</strong> verified or unverified professionals, sub-types:<ul>
<li><strong>Real Estate Agent (URA-certified where applicable)</strong></li>
<li><strong>Developer/Company</strong></li>
<li><strong>Legal Agent</strong></li>
<li><strong>Financial Agent</strong></li>
<li><strong>Service Provider</strong></li>
</ul>
</li>
<li><strong>Verifier/Moderator:</strong> reviews identity/listing verification and moderation cases.</li>
<li><strong>Customer Support:</strong> assists in disputes and user issues (limited admin powers).</li>
<li><strong>Admin:</strong> full platform management.</li>
</ul>
<h4 id="332-relationship-based-access-checks-abac">3.3.2 Relationship-based access checks (ABAC)</h4>
<p>At minimum, access to sensitive resources must check:<br />
- <strong>Ownership:</strong> user owns the listing/document/profile.<br />
- <strong>Participation:</strong> user is a participant in the chat thread / appointment / offer / transaction / dispute.<br />
- <strong>Granted access:</strong> explicit, time-bound access grant exists (e.g., document vault share).<br />
- <strong>Role constraints:</strong> only verifier/admin can approve verification, only admins can ban users, etc.</p>
<h4 id="333-minimum-permissions-matrix-non-exhaustive">3.3.3 Minimum permissions matrix (non-exhaustive)</h4>
<table>
<thead>
<tr>
<th>Action</th>
<th style="text-align: right;">Guest</th>
<th style="text-align: right;">User</th>
<th style="text-align: right;">Professional</th>
<th style="text-align: right;">Verifier/Mod</th>
<th style="text-align: right;">Support</th>
<th style="text-align: right;">Admin</th>
</tr>
</thead>
<tbody>
<tr>
<td>Browse public listings</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>View restricted listing docs (vault)</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Create listing</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Publish listing (after review)</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Submit identity/pro verification request</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Approve/reject verification</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Send chat message</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Block/report user or listing</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Create/accept/counter offers</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>View transaction timeline</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Open dispute + upload evidence</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅</td>
<td style="text-align: right;">✅</td>
</tr>
<tr>
<td>Resolve dispute</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">❌</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅*</td>
<td style="text-align: right;">✅</td>
</tr>
</tbody>
</table>
<p>* Requires ABAC checks (ownership/participation/explicit access grant) and business-rule gating (e.g., only after offer accepted).</p>
<hr />
<h2 id="4-personas_1">4. Personas</h2>
<h3 id="41-seller-persona-rakib-hasan">4.1 Seller Persona (Rakib Hasan)</h3>
<ul>
<li>Experienced seller/renter; wants faster transactions, legal &amp; loan assistance, verification.</li>
</ul>
<h3 id="42-buyer-persona-sumaiya-akter">4.2 Buyer Persona (Sumaiya Akter)</h3>
<ul>
<li>First-time buyer; concerned about fraud, complex legal steps, high prices, loan access.</li>
</ul>
<h3 id="43-agent-persona-inferred">4.3 Agent Persona (Inferred)</h3>
<ul>
<li>Wants lead generation, fast chat response, appointment scheduling, high credibility badges.</li>
</ul>
<hr />
<h2 id="5-system-modules-scope_1">5. System Modules &amp; Scope</h2>
<ol>
<li>Auth &amp; Account (email/phone + OTP + social OAuth)</li>
<li>User Profile + Professional Mode</li>
<li>Verification &amp; Trust (tiered badges, credential reports, optional e-KYC)</li>
<li>Marketplace (Buy/Sell/Rent)</li>
<li>Listings &amp; Media (photos/videos/virtual tours) + Document Vault</li>
<li>Search (advanced filters + map) + saved searches</li>
<li>Offers/Negotiation + Transaction Tracking (Bayna/Dalil/Namjari-aware)</li>
<li>Payments (gateway + OTP/3DS) + payment records</li>
<li>Legal Support Services (directory + booking + case tracking)</li>
<li>Financial Support Services (directory + loan request workflow)</li>
<li>Communication (chat + optional audio/video) + Appointments</li>
<li>Reputation (ratings/reviews)</li>
<li>Notifications (in-app + email/SMS) <strong>[Inferred but required]</strong></li>
<li>Admin/Moderation (users, verifications, listings, transactions, disputes)</li>
<li>Contacts &amp; Networking (follow/connect/block + privacy controls) <strong>[P2]</strong></li>
<li>Community (groups/pages/posts/feed) <strong>[P2]</strong></li>
<li>Blogs &amp; Videos (content hub + moderation) <strong>[P2]</strong></li>
<li>Monetization &amp; Billing (subscriptions, featured listings) <strong>[Inferred]</strong></li>
<li>Government Land Portals (link-outs + tracking) <strong>[BD-context]</strong></li>
</ol>
<hr />
<h2 id="6-assumptions-constraints-dependencies_1">6. Assumptions, Constraints, Dependencies</h2>
<h3 id="61-assumptions">6.1 Assumptions</h3>
<ul>
<li>Users consent to document upload and verification.</li>
<li>Legal/financial partners exist.</li>
<li>Payment gateway provides OTP/3DS or equivalent confirmation.</li>
<li>For MVP, some legal/verification steps may be <strong>manual but trackable</strong>.</li>
</ul>
<h3 id="62-constraints">6.2 Constraints</h3>
<ul>
<li>Personal info security is mandatory.</li>
<li>Verified badge and verified listings must be supported.</li>
<li>Offer/negotiation must exist.</li>
</ul>
<p>Additional constraints (v3.0):<br />
- Government land portals are treated as <strong>external systems</strong>: MSC Home provides link-outs and stores user-entered references/evidence only (no automated scraping/captcha solving).<br />
- Sensitive identity and document data must be protected with least-privilege access, encryption, and full auditing.</p>
<h3 id="63-dependencies">6.3 Dependencies</h3>
<ul>
<li>Maps provider (Google Maps or equivalent)</li>
<li>OTP provider (SMS/Email)</li>
<li>Payment gateway(s) (e.g., SSLCOMMERZ aggregator)</li>
<li>Media storage/CDN</li>
<li>Optional e-KYC provider (e.g., Porichoy for NID verification)</li>
<li>Optional video SDK (Agora/Twilio/Jitsi)</li>
</ul>
<hr />
<h2 id="7-functional-requirements-fr">7. Functional Requirements (FR)</h2>
<blockquote>
<p>Priority: <strong>P0 (MVP must)</strong>, <strong>P1 (near-term)</strong>, <strong>P2 (later)</strong></p>
</blockquote>
<h3 id="71-authentication-account">7.1 Authentication &amp; Account</h3>
<ul>
<li><strong>FR-1 (P0): Register</strong> via email/password and/or phone/password. Support a single user profile that can later switch to Professional Mode.</li>
<li><strong>FR-1a (P0): Social OAuth Login (explicit providers)</strong>  </li>
<li><strong>Google OAuth (P0)</strong>  </li>
<li><strong>LinkedIn OAuth (P1)</strong>  </li>
<li><strong>X/Twitter OAuth (P1)</strong><br />
  System must store provider, provider_user_id, and verified email/phone claims when provided by the provider.</li>
<li><strong>FR-1b (P0): Account Linking &amp; Merge Rules</strong>  </li>
<li>If a user signs in with OAuth and an existing account has the same verified email/phone, system must offer <strong>link</strong> (not duplicate).  </li>
<li>If the user already has an account and adds OAuth later, system must link providers to the same user.  </li>
<li>If duplicates exist (legacy), Admin can merge with audit logs.</li>
<li><strong>FR-2 (P0): Login/Logout</strong> + forgot password (email/SMS reset or OTP-based reset).</li>
<li><strong>FR-3 (P0): Professional Mode Switch</strong> (social user ↔ professional role flow).<br />
  Switching to Professional Mode triggers: profile completion + professional verification submission (see FR-8..FR-11).</li>
<li><strong>FR-4 (P0): OTP Login</strong> via phone (required for Bangladesh market fit).  </li>
<li>OTP must be rate-limited, have TTL, and support resend rules.</li>
<li>OTP verification can also be used for step-up security (e.g., payments, document access).</li>
</ul>
<h3 id="72-user-profile-professional-data">7.2 User Profile &amp; Professional Data</h3>
<ul>
<li><strong>FR-5 (P0): Profile Management</strong> (name, contact, photo).</li>
<li><strong>FR-6 (P0): Professional Profile</strong> captures bank details, BIN/TIN, NID/licenses, financial statement; role-specific docs (BAR certificate, institute credential report).</li>
<li><strong>FR-7 (P1): Reputation Summary</strong> (rating averages, verified badges, response time metrics).</li>
</ul>
<h3 id="73-verification-trust-tiered">7.3 Verification &amp; Trust (Tiered)</h3>
<p>The PDF roadmap requires visible trust signals (verified badges), and multiple credential types (professional/company/ownership). This section formalizes <strong>tiers</strong> so UI can show consistent badges across listings and profiles.</p>
<ul>
<li><strong>FR-8 (P0): Submit Verification</strong> request with one or more verification types and supporting documents.</li>
<li><strong>FR-9 (P0): Review Workflow</strong> approve/reject + reason (admin/verifier) with a full audit trail.</li>
<li><strong>FR-10 (P0): Verified Badge Display</strong> visible on profile and listings, with badge type and verification date.</li>
</ul>
<h4 id="731-verification-tiers-badge-types">7.3.1 Verification tiers (badge types)</h4>
<ul>
<li><strong>Identity Verified (P0)</strong>: NID/passport + selfie/face match (manual) and/or optional e-KYC provider.</li>
<li><strong>Professional Verified (P0/P1)</strong>:</li>
<li><strong>URA-certified agent</strong> (or other applicable regulator body) verification as a distinct professional credential.</li>
<li>Other professional bodies (e.g., BAR Council for lawyers) supported as credential templates.</li>
<li><strong>Company Verified (P0)</strong>: BIN/TIN + trade license + bank details (for real estate companies, legal firms, financial institutions).</li>
<li><strong>Property Ownership Verified (P0)</strong>: deed/dalil + mutation/namjari + tax receipts (as applicable) attached to a listing or owner profile.</li>
<li><strong>Listing Verified (P0)</strong>: listing-level verification checks passed (ownership, address/location, completeness score threshold).</li>
<li><strong>Reputation Verified (P1)</strong>: post-transaction rating eligibility unlocked + “trusted seller/agent” thresholds (see FR-44/45).</li>
</ul>
<h4 id="732-credential-reports-from-financialnon-financial-institutes-pdf-gap-closure">7.3.2 Credential reports from financial/non-financial institutes (PDF gap closure)</h4>
<ul>
<li><strong>FR-10a (P1): Credential Report Upload</strong>: professionals/companies can attach a “credential report” issued by:</li>
<li><strong>Financial Institute</strong> (e.g., bank statement, solvency, loan eligibility confirmation)</li>
<li><strong>Non-Financial Institute</strong> (e.g., employer letter, membership/certification issuer, training institute)</li>
<li><strong>FR-10b (P1): Credential Issuer Registry</strong>: admin maintains allowed issuer types and verification rules (manual verification supported).</li>
</ul>
<h4 id="733-optional-e-kyc-provider-integration">7.3.3 Optional e-KYC provider integration</h4>
<ul>
<li><strong>FR-11 (P1): e-KYC Provider Check</strong> (e.g., NID verification via an external provider) with fallback to manual verification.<br />
  Government portals and identity systems are treated as external systems; no scraping or captcha bypass.</li>
</ul>
<h3 id="74-listings-media">7.4 Listings &amp; Media</h3>
<ul>
<li><strong>FR-12 (P0): Create Listing</strong> with location/area/price/terms/media/docs.</li>
<li><strong>FR-13 (P0): Listing Verification</strong> (ownership + info verification checks).</li>
<li><strong>FR-14 (P1): Virtual Tours</strong> (as media or external link).</li>
<li><strong>FR-15 (P0): Favorites</strong> (save listings).</li>
<li><strong>FR-16 (P0): Document Vault</strong> for sensitive docs (deeds/dalil, mutation/namjari, tax receipts, allotment letters) with strict access controls.</li>
<li><strong>FR-17 (P1): Unit Converter</strong> (SqFt ↔ Katha/Decimal/Shotok).</li>
<li><strong>FR-18 (P1): Market Value Guidance</strong> (manual inputs by agents + optional analytics later). Must show disclaimers and data source notes.</li>
</ul>
<h4 id="741-property-type-matrix-pdf-gap-closure">7.4.1 Property type matrix (PDF gap closure)</h4>
<p>The PDF roadmap mixes apartment-first positioning with strong land workflows. The SRS therefore supports <strong>multiple property types</strong> with explicit required fields and required documents.</p>
<table>
<thead>
<tr>
<th>Property Type</th>
<th>Required Listing Fields (minimum)</th>
<th>Required Documents (minimum)</th>
<th>Step Tracking Template</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Apartment/Flat (Buy/Sell)</strong></td>
<td>address/area, floor/unit, size (sqft), bedrooms/baths, price, utilities, handover status, photos</td>
<td>ownership proof or allotment docs, HOA/utility bills if available</td>
<td>Offer → Booking/Bayana (optional) → Handover/Registration support</td>
</tr>
<tr>
<td><strong>Apartment/Flat (Rent)</strong></td>
<td>rent, deposit, lease duration, move-in date, rules, photos</td>
<td>landlord proof (NID + ownership proof where possible)</td>
<td>Inquiry → Viewing → Agreement → Move-in</td>
</tr>
<tr>
<td><strong>Land (Buy/Sell)</strong></td>
<td>mouza, dag/khatian, size (katha/decimal), location pin/map, asking price, land type, access road</td>
<td>dalil/deed, mutation/namjari, tax receipts, land development docs (if any)</td>
<td>Offer → Bayana → Deed transfer → Mutation follow-up</td>
</tr>
<tr>
<td><strong>Commercial/Project</strong></td>
<td>project/company profile, unit inventory, pricing model, handover timeline</td>
<td>project approvals/ownership, company docs (BIN/TIN)</td>
<td>Offer → Booking → Installment tracking (optional P2)</td>
</tr>
</tbody>
</table>
<p>Notes:<br />
- “Verified Land List” and land ownership verification are supported via <strong>document vault + verification checks + government portal link-outs</strong> (see Section 7.20).<br />
- For each property type the system must validate presence of required fields and compute <strong>Listing Accuracy Score</strong> (see Section 7.4.2).</p>
<h4 id="742-listing-accuracy-score-completeness-evidence">7.4.2 Listing Accuracy Score (Completeness + Evidence)</h4>
<ul>
<li>Listing must display an <strong>Accuracy Score</strong> computed from completeness and evidence strength:</li>
<li>Field completeness (required fields filled)</li>
<li>Media quality (minimum photo count, resolution)</li>
<li>Document evidence present (ownership/identity docs uploaded)</li>
<li>Verification status (listing verified checks passed)</li>
<li>Score impacts ranking (see Search) and creates an actionable checklist for sellers/agents.</li>
</ul>
<h3 id="75-search-discovery">7.5 Search &amp; Discovery</h3>
<ul>
<li><strong>FR-19 (P0): Advanced Search</strong> filters: location/price/area + verified-only.</li>
<li><strong>FR-20 (P1): Map-Based Search</strong>.</li>
<li><strong>FR-21 (P1): Saved Searches + Alerts</strong> (notify when a matching listing is published).</li>
<li><strong>FR-22 (P1): Compare Listings</strong> up to N items side-by-side.</li>
</ul>
<h3 id="76-communication-appointments">7.6 Communication &amp; Appointments</h3>
<ul>
<li><strong>FR-23 (P0): Live Chat</strong> between buyer ↔ seller/agent and buyer ↔ legal/financial agent when related to a transaction.</li>
<li><strong>FR-24 (P1): Audio/Video Call</strong> (integrated SDK) with consent and abuse reporting.</li>
<li><strong>FR-25 (P0): Appointment Booking</strong> for agents/legal/financial with time slots and confirmation.</li>
<li><strong>FR-26 (P0): Purpose Capture</strong> for contact (message/appointment purpose).</li>
</ul>
<h4 id="761-agent-responsiveness-pdf-gap-closure">7.6.1 Agent responsiveness (PDF gap closure)</h4>
<p>The PDF recommends that agents respond quickly; this is formalized as measurable behavior + product mechanisms.</p>
<ul>
<li><strong>FR-26a (P1): Response SLA Timers</strong></li>
<li>Chat: show “expected response time” and last active.</li>
<li>Appointments: accept/decline within a configured window (default 2 hours).</li>
<li><strong>FR-26b (P1): Reminders &amp; Escalation</strong></li>
<li>Auto-remind professionals if no response.</li>
<li>Offer alternatives: suggest other verified professionals in the same area/category.</li>
<li><strong>FR-26c (P1): Response Metrics</strong></li>
<li>Maintain response rate (7/30 day), median response time, and show in professional profile.</li>
<li>Admin can flag/penalize chronic non-responsive accounts (see moderation).</li>
</ul>
<h3 id="77-offers-orders-transactions">7.7 Offers, Orders, Transactions</h3>
<ul>
<li><strong>FR-27 (P0): Submit Offer</strong> securely.</li>
<li><strong>FR-28 (P0): Negotiate</strong> (counter/accept/reject/withdraw).</li>
<li><strong>FR-29 (P0): Transaction Step Tracking</strong> visible to both parties.</li>
<li><strong>FR-30 (P0): Place Order</strong> for property/service.</li>
<li><strong>FR-31 (P0): Confirm/Cancel Order</strong> with state transitions.</li>
<li><strong>FR-32 (P0): Proof Uploads per Step</strong> (e.g., Bayna copy, Dalil copy, Namjari/mutation docs) to keep the digital timeline verifiable.</li>
</ul>
<h3 id="78-payments">7.8 Payments</h3>
<ul>
<li><strong>FR-33 (P0): Payment Methods</strong> card + e-banking + OTP/3DS (gateway-dependent).</li>
<li><strong>FR-34 (P0): Secure Payment Records</strong> linked to order/transaction with idempotency keys, reconciliation status, and audit logs.</li>
<li><strong>FR-35 (P1): Buyer Protection / Dispute Hooks (Expanded)</strong><br />
  The PDF recommends buyer protection and step tracking. MSC Home must support a minimal but well-defined buyer protection program that maps to disputes.</li>
</ul>
<h4 id="781-payment-protection-modes-configurable">7.8.1 Payment protection modes (configurable)</h4>
<ul>
<li><strong>Mode A - Direct Pay (P0):</strong> payment is captured directly by the gateway to the seller/provider (platform only records).  </li>
<li><strong>Mode B - Platform Hold / Milestone Hold (P1):</strong> payment is held (or partially held) until a transaction step is confirmed (e.g., Bayana received, document access granted).<br />
  (Implementation depends on gateway capabilities and legal/compliance review; default to Mode A if hold is not allowed.)</li>
</ul>
<h4 id="782-buyer-protection-policy-platform-rules">7.8.2 Buyer protection policy (platform rules)</h4>
<ul>
<li><strong>Eligibility:</strong> only orders that pass identity verification and have recorded transaction steps/evidence.</li>
<li><strong>Claim windows:</strong> configurable time window (e.g., 7 days after payment OR within the active transaction step window).</li>
<li><strong>Evidence required:</strong> chat logs, uploaded documents, payment receipts, appointment logs, and step timeline.</li>
<li><strong>Outcomes:</strong> refund, partial refund, rework/redo (service), or dismissal.</li>
<li><strong>Transparency:</strong> show policy summary in checkout and in order detail.</li>
</ul>
<h3 id="79-legal-support">7.9 Legal Support</h3>
<ul>
<li><strong>FR-36 (P0): Legal Service Discovery</strong>.</li>
<li><strong>FR-37 (P0): Book Legal Agent</strong>.</li>
<li><strong>FR-38 (P1): Legal Case Tracking</strong> (case created, docs uploaded, report delivered).</li>
</ul>
<h3 id="710-financial-support">7.10 Financial Support</h3>
<ul>
<li><strong>FR-39 (P0): Financial Service Discovery</strong>.</li>
<li><strong>FR-40 (P1): Loan Assistance Workflow</strong> request → response → status tracking.</li>
</ul>
<h3 id="711-reviews-reputation">7.11 Reviews &amp; Reputation</h3>
<ul>
<li><strong>FR-41 (P0): Mutual Rating</strong> buyer ↔ seller after completion.</li>
<li><strong>FR-42 (P0): Listing/Agent Reviews</strong>.</li>
<li><strong>FR-43 (P1): Feedback Tools</strong> respond to reviews + issue resolution.</li>
</ul>
<h3 id="712-notifications">7.12 Notifications</h3>
<ul>
<li><strong>FR-44 (P0): In-app Notifications</strong> for offers, chat, booking, verification, payment events.</li>
<li><strong>FR-45 (P1): SMS/Email Notifications</strong> for critical steps.</li>
</ul>
<h3 id="713-contacts-community-content-p2">7.13 Contacts, Community + Content (P2)</h3>
<p>This section mirrors the PDF IA that includes Contacts, Groups/Pages/Posts, and Blogs/Videos. These are P2 by default, but the data model and permissions are defined now to avoid rework.</p>
<ul>
<li><strong>FR-46 (P2): Search</strong> groups/pages/posts/people/places and professional services.</li>
<li><strong>FR-47 (P2): Groups/Pages/Posts</strong> create + join + follow + like/comment/share. Includes moderation queue for reported content.</li>
<li><strong>FR-48 (P2): View Blogs &amp; Videos</strong> (content hub).</li>
<li><strong>FR-49 (P2): Post Blogs &amp; Videos</strong> (moderated).</li>
</ul>
<h4 id="7131-contacts-networking-pdf-contacts-connect-with-people">7.13.1 Contacts &amp; networking (PDF “Contacts / Connect with people”)</h4>
<ul>
<li>Connection model supports:</li>
<li><strong>Follow</strong> (one-way) for agents/companies/pages</li>
<li><strong>Connect</strong> (two-way) for person-to-person networking (optional)</li>
<li>Privacy controls:</li>
<li>profile visibility levels (public/registered/contacts-only)</li>
<li>contact request approvals</li>
<li>block/unblock</li>
<li>Discovery:</li>
<li>“People you may know” can be basic (shared area, shared group) without heavy ML.</li>
</ul>
<h3 id="714-adminmoderation">7.14 Admin/Moderation</h3>
<ul>
<li><strong>FR-50 (P0): Admin Console</strong> manage users, verifications, listings, transactions, disputes.</li>
<li><strong>FR-51 (P0): Audit Logs</strong> for verification &amp; payment events.</li>
</ul>
<h3 id="715-transparency-guides-and-faqs">7.15 Transparency, Guides, and FAQs</h3>
<ul>
<li><strong>FR-52 (P0): Ownership Verification Guide UI</strong> provides step-by-step guidance for sellers on how to prove ownership and what documents are expected (linked to listing verification workflow).</li>
<li><strong>FR-53 (P1): Legal &amp; Loan Guides</strong> provide checklists, explanations of steps (Bayna/Dalil/Namjari), and loan option explanations (CMS-backed).</li>
<li><strong>FR-54 (P1): FAQ Templates</strong> allow sellers/agents to attach common Q&amp;A to a listing (e.g., service charge, utility status, facing, parking, handover date).</li>
<li><strong>FR-55 (P1): Cost Transparency Fields</strong> capture and display known costs (e.g., service charge, maintenance, booking money/deposit, additional fees) and explicitly label “unknown / not provided” fields.</li>
</ul>
<h3 id="716-safety-abuse-reporting-and-disputes">7.16 Safety, Abuse Reporting, and Disputes</h3>
<ul>
<li><strong>FR-56 (P0): Report Listing/User</strong> (fraud, spam, harassment, inappropriate content) with category, free-text, attachments, and optional anonymity.</li>
<li><strong>FR-57 (P1): Dispute Case Management (Expanded)</strong></li>
<li>Open a dispute linked to an <strong>order/transaction</strong>.</li>
<li>Upload evidence (documents, screenshots, payment ref, step proof).</li>
<li>Admin review + resolution workflow with outcome and audit trail.</li>
<li>Notify all parties and lock/unlock actions depending on dispute state.</li>
</ul>
<h4 id="7161-dispute-lifecycle-recommended">7.16.1 Dispute lifecycle (recommended)</h4>
<ul>
<li><strong>Open → Evidence Collection → Review → Resolution → Closed</strong></li>
<li><strong>SLA targets (configurable):</strong></li>
<li>Acknowledge dispute within 24 hours</li>
<li>First review decision within 3 business days (or configurable)</li>
<li><strong>Resolution types:</strong></li>
<li>Refund (full/partial)</li>
<li>Cancel order and archive transaction</li>
<li>Continue transaction with corrective steps</li>
<li>Account penalties (warning, suspend, ban)</li>
</ul>
<h4 id="7162-buyer-protection-alignment">7.16.2 Buyer protection alignment</h4>
<ul>
<li>If payment protection Mode B is enabled, disputes can trigger <strong>hold release</strong> or <strong>refund</strong> decisions.</li>
<li>If Mode A is used, platform records dispute decision and supports refund request initiation via gateway flow (gateway-dependent).</li>
</ul>
<h4 id="7163-abuse-controls-minimum">7.16.3 Abuse controls (minimum)</h4>
<ul>
<li>Block user (chat/appointment restrictions)</li>
<li>Rate-limit spam contacts/messages</li>
<li>Automated flagging rules for repeated reports</li>
</ul>
<h3 id="717-real-estate-company-project-listings-from-interview-insights">7.17 Real Estate Company / Project Listings (from interview insights)</h3>
<ul>
<li><strong>FR-58 (P1): Project Listing Type</strong> supports developer/company projects with units, handover date, and construction progress.</li>
<li><strong>FR-59 (P1): Project Progress Updates</strong> allow verified developers to post progress updates (admin-moderated) to reduce “slow project completion” trust issues.</li>
</ul>
<h3 id="718-monetization-billing">7.18 Monetization &amp; Billing</h3>
<ul>
<li><strong>FR-60 (P1): Subscription Plans</strong> for agents/developers (limits, analytics, featured placements).</li>
<li><strong>FR-61 (P1): Featured Listings</strong> (pay-per-duration) with clear labeling.</li>
</ul>
<h3 id="719-service-provider-marketplace-gap-closure-from-v11">7.19 Service Provider Marketplace (Gap closure from v1.1)</h3>
<ul>
<li><strong>FR-62 (P1): Service Listings</strong> service providers can create/edit listings with category, service area, price model, availability, and portfolio.</li>
<li><strong>FR-63 (P1): Book/Order Services</strong> users can request or book a service (with schedule, location, scope, and notes).</li>
<li><strong>FR-64 (P1): Provider Payout Hooks</strong> store provider payout account details and payout status per service order (implementation may be manual in MVP).</li>
<li><strong>FR-65 (P1): Service Reviews</strong> users can review service providers after a completed service order.</li>
</ul>
<h3 id="720-government-land-portals-bd-context-link-out-tracking">7.20 Government Land Portals (BD-context: link-out + tracking)</h3>
<ul>
<li><strong>FR-66 (P0): Official Portal Deep Links</strong> provide help-center links and contextual buttons to official portals for:<ul>
<li>Land record/map services (DLRMS)</li>
<li>Online mutation (e-Namjari)</li>
<li>Land Development Tax (ভূমি উন্নয়ন কর)</li>
</ul>
</li>
<li><strong>FR-67 (P0): Portal Reference Capture</strong> allow users to store portal references as part of a transaction timeline <strong>without</strong> requiring the platform to integrate directly with government systems. At minimum support:<ul>
<li>Portal type: DLRMS / Mutation (e-Namjari) / LDTax</li>
<li>Application/holding/reference numbers (as applicable)</li>
<li>Mobile number used for tracking (as applicable)</li>
<li>Notes and attachment(s): screenshot/PDF receipt</li>
<li>Timestamp + actor (who captured)</li>
</ul>
</li>
<li><strong>FR-68 (P1): Status Tracking Assistance (Manual)</strong> provide a guided “check status” UX that mirrors the portal’s required inputs and stores a <strong>user-entered</strong> status snapshot with timestamp.<ul>
<li>Example (DLRMS tracking): application number + mobile number + <strong>captcha math sum</strong> input.</li>
<li>The platform must <strong>not</strong> attempt to automate portal submissions, scrape pages, or solve captchas. The workflow is <strong>link-out + user manual entry + optional screenshot upload</strong>.</li>
<li>Status snapshots store: portal type, reference identifiers, status text selected/entered by the user, captured_at, optional evidence attachment.</li>
</ul>
</li>
<li><strong>FR-69 (P1): Proof Attachments from Portals</strong> support uploading QR-coded documents (e.g., khatian copy / DCR) as step proofs and link them to transaction steps.</li>
</ul>
<p>* Notes (BD context):<br />
- LDTax holding registration commonly requires user identity inputs such as mobile number, NID number, DOB, and land references (e.g., khatiyan/dakhila info). MSC Home should only <strong>guide</strong> users and store references/evidence they voluntarily provide.</p>
<h3 id="721-payment-gateway-integration-sslcommerz-style-hardening">7.21 Payment Gateway Integration (SSLCOMMERZ-style hardening)</h3>
<ul>
<li><strong>FR-70 (P0): Hosted Checkout Support</strong> support redirect-based hosted checkout in addition to (or instead of) embedded checkout for MVP reliability.</li>
<li><strong>FR-71 (P0): IPN/Webhook Listener</strong> implement a server-to-server notification endpoint to receive payment status updates independent of the user’s browser session.</li>
<li><strong>FR-72 (P0): Post-Payment Validation Call</strong> validate successful payment notifications by calling the gateway validation endpoint and reconciling amount/currency/transaction IDs before marking orders as PAID.</li>
<li><strong>FR-73 (P1): Refund Operations</strong> support initiating and tracking refunds (gateway dependent) and store refund reference IDs/status.</li>
<li><strong>FR-74 (P1): Risk Holds</strong> if gateway flags a payment as risky, the system must place the order in a “HOLD” state for manual verification.</li>
</ul>
<h3 id="722-operational-safety-requirements-v30-addendum">7.22 Operational &amp; Safety Requirements (v3.0 Addendum)</h3>
<h4 id="7221-listing-lifecycle-moderation">7.22.1 Listing lifecycle &amp; moderation</h4>
<ul>
<li><strong>FR-75 (P0): Listing Lifecycle State Machine</strong> implement listing statuses and allowed transitions (see diagram in Section 13):<ul>
<li>DRAFT → SUBMITTED → UNDER_REVIEW → (PUBLISHED | CHANGES_REQUESTED | REJECTED)</li>
<li>PUBLISHED → (PAUSED | ARCHIVED)</li>
<li>CHANGES_REQUESTED → SUBMITTED</li>
<li>Any non-terminal → ARCHIVED (user-initiated) with retention policy</li>
</ul>
</li>
<li><strong>FR-76 (P0): Listing Moderation Queue</strong> provide an admin/verifier queue for listing review decisions with:<ul>
<li>decision: approve / reject / request_changes</li>
<li>reason codes + free-text notes</li>
<li>evidence links (photos/docs) and an audit trail</li>
</ul>
</li>
<li><strong>FR-77 (P1): Re-Verification Triggers</strong> support automatic or manual re-review when:<ul>
<li>listing price changes beyond threshold</li>
<li>location or ownership documents change</li>
<li>user receives fraud reports above threshold</li>
<li>listing has been inactive for N days and is re-published</li>
</ul>
</li>
<li><strong>FR-78 (P0): Status History + Auditability</strong> store listing status history (who, what, when, why) and expose it to Admin.</li>
</ul>
<h4 id="7222-document-vault-access-controls">7.22.2 Document vault access controls</h4>
<ul>
<li><strong>FR-79 (P0): Document Access Requests</strong> allow a user to request access to a listing’s sensitive documents (e.g., Dalil/Mutation/Tax) with:<ul>
<li>purpose (dropdown + free text)</li>
<li>requested documents (explicit selection)</li>
<li>expiry request (default configurable)</li>
</ul>
</li>
<li><strong>FR-80 (P0): Document Access Grants</strong> allow owner/agent (and optionally admin) to approve/deny requests, generating a <strong>time-bound access grant</strong> with:<ul>
<li>scope (which docs)</li>
<li>expiry timestamp</li>
<li>download/view permissions (default: view-only)</li>
<li>revocation support</li>
</ul>
</li>
<li><strong>FR-81 (P1): Document Watermarking / View-Only</strong> for shared documents, render watermarked previews (e.g., userId + timestamp) and discourage raw downloads where feasible.</li>
<li><strong>FR-82 (P0): Document Access Audit Log</strong> record every view/download attempt with outcome (allowed/denied) for dispute and fraud investigation.</li>
</ul>
<h4 id="7223-messaging-safety-abuse-prevention">7.22.3 Messaging safety &amp; abuse prevention</h4>
<ul>
<li><strong>FR-83 (P0): Block &amp; Report</strong> users can block another user; blocked users cannot message/call each other.</li>
<li><strong>FR-84 (P0): Anti-Spam Controls</strong> enforce server-side rate limits and abuse detection for:<ul>
<li>message frequency</li>
<li>repeated content</li>
<li>link/phone-number sharing limits (configurable)</li>
</ul>
</li>
<li><strong>FR-85 (P1): Moderation Cases</strong> reported content creates a moderation case with triage, actions (warn/mute/suspend/ban), and evidence snapshots.</li>
</ul>
<h4 id="7224-notifications-preferences-delivery">7.22.4 Notifications: preferences &amp; delivery</h4>
<ul>
<li><strong>FR-86 (P0): Notification Preferences</strong> users can configure per-category notification preferences (in-app, email, SMS) and quiet hours.</li>
<li><strong>FR-87 (P1): Reliable Notification Delivery</strong> implement retries/backoff and a dead-letter queue for outbound email/SMS to avoid silent drops.</li>
</ul>
<h4 id="7225-disputes-cancellations-refunds">7.22.5 Disputes, cancellations, refunds</h4>
<ul>
<li><strong>FR-88 (P1): Dispute Lifecycle</strong> implement dispute creation, evidence uploads, admin workflow, and outcomes (see diagram in Section 13).</li>
<li><strong>FR-89 (P1): Cancellation Policy Engine</strong> define and enforce cancellation rules (time window, state-based eligibility) across orders and transactions.</li>
<li><strong>FR-90 (P1): Refund Tracking</strong> store refund attempts and statuses, and link them to disputes where applicable.</li>
</ul>
<h4 id="7226-payments-idempotency-signature-verification">7.22.6 Payments: idempotency &amp; signature verification</h4>
<ul>
<li><strong>FR-91 (P0): Idempotent Payment Processing</strong> process payment notifications and validations idempotently (dedupe by provider transaction identifiers + local idempotency keys).</li>
<li><strong>FR-92 (P0): Verify Gateway Signatures</strong> verify gateway callback/IPN authenticity where supported (e.g., signature fields) before trusting payloads.</li>
<li><strong>FR-93 (P1): Reconciliation Report</strong> provide a basic daily reconciliation export/report (orders vs payments vs gateway status) for operations.</li>
</ul>
<hr />
<h2 id="8-business-rules-br">8. Business Rules (BR)</h2>
<h3 id="81-verification">8.1 Verification</h3>
<ul>
<li><strong>BR-1:</strong> Verified badge only after successful verification approval.</li>
<li><strong>BR-2:</strong> Role-based document requirements (lawyer BAR certificate, institute credential report, etc.).</li>
<li><strong>BR-3:</strong> Listing “Verified” requires ownership verification completion.</li>
<li><strong>BR-4 (P1):</strong> If e-KYC provider check fails/unavailable, verification can proceed manually; the system stores provider attempts for audit.</li>
</ul>
<h3 id="82-accuracy-score">8.2 Accuracy Score</h3>
<ul>
<li><strong>BR-5:</strong> Accuracy Score is computed from field completeness (required + optional weights).</li>
<li><strong>BR-6:</strong> Accuracy Score formula:<br />
    $$\text{AccuracyScore} = \left(\frac{\sum w_i \cdot \mathbb{1}[field_i\ present]}{\sum w_i}\right) \times 100$$<br />
    Weights are configurable by Admin.</li>
<li><strong>BR-7 (optional):</strong> Higher score boosts ranking.</li>
</ul>
<h3 id="83-cost-transparency">8.3 Cost Transparency</h3>
<ul>
<li><strong>BR-8:</strong> A listing must not claim “no extra costs” unless the seller explicitly confirms all cost fields.</li>
<li><strong>BR-9:</strong> If a seller does not provide a cost field, UI must label it as “Not provided” (to avoid hidden costs).</li>
</ul>
<h3 id="84-offerstransactions">8.4 Offers/Transactions</h3>
<ul>
<li><strong>BR-10:</strong> Only logged-in buyers can submit offers.</li>
<li><strong>BR-11:</strong> Offer states: SUBMITTED → COUNTERED → ACCEPTED/REJECTED/WITHDRAWN.</li>
<li><strong>BR-12:</strong> Accepted offer creates a transaction record.</li>
<li><strong>BR-13:</strong> Transaction steps are append-only and timestamped.</li>
<li><strong>BR-14:</strong> Step proof rules (MVP): step can be marked complete only if required proof type is attached (document or counterparty confirmation).</li>
</ul>
<h3 id="85-payments">8.5 Payments</h3>
<ul>
<li><strong>BR-15:</strong> Payment must reference one order; order must reference one transaction (if property).</li>
<li><strong>BR-16:</strong> OTP/3DS is required for payment confirmation (gateway-dependent).</li>
<li><strong>BR-17:</strong> Cancel rules: if payment succeeded, refund flow is initiated.</li>
</ul>
<h3 id="86-buyer-protection-disputes">8.6 Buyer Protection / Disputes</h3>
<ul>
<li><strong>BR-18 (P1):</strong> A dispute can be opened only for PAID orders within a configurable window.</li>
<li><strong>BR-19 (P1):</strong> Dispute status changes are admin-audited.</li>
</ul>
<h3 id="87-reviews">8.7 Reviews</h3>
<ul>
<li><strong>BR-20:</strong> Reviews allowed only after transaction completion.</li>
<li><strong>BR-21:</strong> One review per party per transaction.</li>
</ul>
<h3 id="88-service-provider-marketplace">8.8 Service Provider Marketplace</h3>
<ul>
<li><strong>BR-22:</strong> Service reviews are allowed only after a service order is completed.</li>
<li><strong>BR-23:</strong> Provider payout status must be auditable (who approved, when, and reference details).</li>
</ul>
<h3 id="89-payment-gateway-validation-risk">8.9 Payment Gateway Validation &amp; Risk</h3>
<ul>
<li><strong>BR-24:</strong> An order must be marked PAID only after back-end validation succeeds (IPN alone is not sufficient).</li>
<li><strong>BR-25:</strong> Back-end validation must reconcile at minimum: transaction ID, amount, currency type, and final status.</li>
<li><strong>BR-26:</strong> If the gateway returns a “risky” flag for an otherwise successful payment, the platform must place the order into a HOLD state and require additional verification before delivering buyer protection guarantees or releasing service confirmation.</li>
<li><strong>BR-27:</strong> The payment integration must require TLS 1.2+ on the merchant server and use server-to-server calls for sensitive API operations.</li>
</ul>
<h3 id="810-listing-lifecycle-moderation">8.10 Listing Lifecycle &amp; Moderation</h3>
<ul>
<li><strong>BR-28:</strong> Listings must not be publicly visible unless status is PUBLISHED.</li>
<li><strong>BR-29:</strong> Listings with CHANGES_REQUESTED cannot return to PUBLISHED without re-submission and a new review decision.</li>
<li><strong>BR-30 (P1):</strong> A listing should be auto-paused if it receives a configurable number of credible fraud reports pending review.</li>
<li><strong>BR-31:</strong> Re-verification triggers (FR-77) must result in either (a) review required before publish, or (b) status downgrade to UNDER_REVIEW/PAUSED until resolved.</li>
</ul>
<h3 id="811-document-vault-access-policy">8.11 Document Vault Access Policy</h3>
<ul>
<li><strong>BR-32:</strong> Vault documents are private by default; access requires explicit grant (FR-80) or verifier/admin role.</li>
<li><strong>BR-33:</strong> Access grants are time-bound and revocable; access must be denied after expiry.</li>
<li><strong>BR-34 (P1):</strong> When sharing is enabled, provide watermarked previews; raw downloads (if allowed) must be auditable.</li>
<li><strong>BR-35:</strong> Every access attempt must be logged (FR-82), including denied attempts.</li>
</ul>
<h3 id="812-messaging-safety-abuse-handling">8.12 Messaging Safety &amp; Abuse Handling</h3>
<ul>
<li><strong>BR-36:</strong> Blocking is mutual: when either party blocks, messaging/calling is disabled both ways.</li>
<li><strong>BR-37:</strong> The platform must enforce rate limits server-side; clients cannot bypass.</li>
<li><strong>BR-38 (P1):</strong> Moderation actions (mute/suspend/ban) must be reversible by Admin and fully audited.</li>
</ul>
<h3 id="813-notifications">8.13 Notifications</h3>
<ul>
<li><strong>BR-39:</strong> Notifications must respect user preferences and quiet hours except for mandatory security alerts (e.g., suspicious login, password change).</li>
<li><strong>BR-40 (P1):</strong> Notification delivery failures must be retried and surfaced to operations (dead-letter queue monitoring).</li>
</ul>
<h3 id="814-cancellations-refunds-and-holds">8.14 Cancellations, Refunds, and Holds</h3>
<ul>
<li><strong>BR-41 (P1):</strong> Cancellation eligibility depends on order state; once PAID, cancellation triggers refund workflow (where supported).</li>
<li><strong>BR-42 (P1):</strong> Refund outcomes are final only after gateway confirmation; partial refunds (if supported) must reconcile amounts.</li>
<li><strong>BR-43 (P1):</strong> HOLD orders must not progress to service delivery or step completion requiring payment until released by Admin/Support.</li>
</ul>
<hr />
<h2 id="9-user-stories-real-life-scenarios_1">9. User Stories &amp; Real-Life Scenarios</h2>
<p>This section provides comprehensive user stories with detailed acceptance criteria and real-world scenarios based on Bangladesh real estate market dynamics.</p>
<h3 id="91-buyer-stories-detailed-scenarios">9.1 Buyer Stories - Detailed Scenarios</h3>
<h4 id="us-b1-property-discovery-search">US-B1: Property Discovery &amp; Search</h4>
<p><strong>As a</strong> first-time property buyer in Dhaka,<br />
<strong>I want to</strong> search for 3-bedroom apartments in Gulshan/Banani area with verified listings only,<br />
<strong>So that</strong> I can find trustworthy options within my budget.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Sumaiya Akter, a 28-year-old software engineer, is looking to buy her first apartment. She has a budget of BDT 80 Lakh and wants to live near her workplace in Gulshan. She is concerned about fraud and wants to see only verified properties.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- System displays advanced search filters with location (area/zone), price range, property type, bedrooms, and verified-only toggle<br />
- Search results show verified badge prominently for verified listings<br />
- Results include listing accuracy score (completeness percentage)<br />
- Each listing shows key info: price, area (sqft), location, owner/agent name, and verification status<br />
- System highlights "Recommended" properties based on search history<br />
- Results load within 2 seconds for searches with &lt; 100 matches<br />
- Favorites can be saved for later viewing with one-click<br />
- Search can be saved with email/SMS alerts for new matching listings</p>
<p><strong>Test Data:</strong><br />
- Location: Gulshan, Banani, Baridhara<br />
- Price: BDT 60-90 Lakh<br />
- Type: Apartment/Flat<br />
- Bedrooms: 3<br />
- Verified Only: Yes<br />
- Expected Results: 15-25 verified listings</p>
<hr />
<h4 id="us-b2-detailed-listing-inspection">US-B2: Detailed Listing Inspection</h4>
<p><strong>As a</strong> buyer,<br />
<strong>I want to</strong> view comprehensive listing details including photos, virtual tour, document status, and ownership verification,<br />
<strong>So that</strong> I can make an informed decision without visiting in person initially.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Sumaiya finds an apartment in Banani that matches her criteria. Before scheduling a visit, she wants to verify all details online - including checking if the seller has uploaded ownership documents (Dalil) and whether the listing has been field-verified.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Listing detail page shows:<br />
  - High-resolution photo gallery (minimum 10 photos for apartments)<br />
  - Virtual tour (if available) with 360° view<br />
  - Detailed specifications: floor plan, facing direction, utilities, parking, amenities<br />
  - Document vault status showing which documents are uploaded (Dalil, Tax Receipt, NOC, etc.)<br />
  - Ownership verification status and verification date<br />
  - Listing accuracy score with breakdown (required vs. optional fields filled)<br />
  - Seller/agent profile with verified badge and rating<br />
  - Response time metrics for the agent<br />
- User can save listing to favorites<br />
- User can request document access with reason<br />
- User can initiate chat or book appointment directly from listing page<br />
- System logs all document access requests for audit</p>
<p><strong>Test Data:</strong><br />
- Listing ID: BAN-APT-2024-0045<br />
- Location: Road 12, Block E, Banani<br />
- Price: BDT 75 Lakh<br />
- Size: 1,450 sqft, 3 bed, 3 bath<br />
- Documents: Dalil (uploaded), Mutation (uploaded), Tax Receipt (uploaded)<br />
- Verification: Ownership verified, Field verified<br />
- Accuracy Score: 92%</p>
<hr />
<h4 id="us-b3-communication-appointment-booking">US-B3: Communication &amp; Appointment Booking</h4>
<p><strong>As a</strong> buyer,<br />
<strong>I want to</strong> chat with the agent, book an appointment for property visit, and capture all communication history,<br />
<strong>So that</strong> I can coordinate visit schedules and have a record of all discussions.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>After reviewing the listing, Sumaiya wants to visit the property. She messages the agent via the platform asking about possession date and utility bills. The agent responds within 2 hours confirming the visit for the upcoming Friday at 4 PM.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Chat interface shows real-time message status (sent/delivered/read)<br />
- User can send text, images, and documents via chat<br />
- User can book appointment by selecting date, time, and purpose<br />
- Agent receives booking request notification (in-app, email, SMS)<br />
- Agent can accept/reschedule/decline appointment with reason<br />
- System sends confirmation notification to both parties<br />
- All chat history is preserved and searchable<br />
- User can report spam or block user if needed<br />
- System tracks agent response time and displays on profile<br />
- Appointment reminders sent 24 hours and 2 hours before scheduled time</p>
<p><strong>Test Data:</strong><br />
- Chat initiated: 2024-01-15 10:30 AM<br />
- Agent response time: 1 hour 45 minutes<br />
- Appointment requested: 2024-01-19, 4:00 PM<br />
- Purpose: Property visit and document review<br />
- Agent confirmation: Accepted within 3 hours</p>
<hr />
<h4 id="us-b4-offer-submission-negotiation">US-B4: Offer Submission &amp; Negotiation</h4>
<p><strong>As a</strong> buyer,<br />
<strong>I want to</strong> submit a formal offer with my proposed price and terms, and negotiate if needed,<br />
<strong>So that</strong> I can reach a mutually acceptable deal without informal discussions.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Sumaiya likes the property after the visit. The asking price is BDT 75 Lakh but she wants to offer BDT 72 Lakh based on market comparison. She submits the offer through the platform. The agent counters at BDT 73.5 Lakh. After one more round, they agree at BDT 73 Lakh.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- User can submit offer with:<br />
  - Proposed price<br />
  - Advance/booking money amount<br />
  - Possession timeline preference<br />
  - Loan/financing requirement (Yes/No)<br />
  - Additional terms/conditions (free text)<br />
- Offer status tracked: SUBMITTED → COUNTERED → ACCEPTED/REJECTED/WITHDRAWN<br />
- Seller/agent can:<br />
  - Accept offer (creates transaction)<br />
  - Counter with new price and terms<br />
  - Reject with reason<br />
- Both parties see offer history with timestamps<br />
- System limits counter offers to prevent infinite loops (max 5 rounds)<br />
- Accepted offer automatically creates a transaction record and moves to next steps<br />
- Email/SMS notifications sent on every offer action</p>
<p><strong>Test Data:</strong><br />
- Listing Price: BDT 75,00,000<br />
- Offer 1 (Buyer): BDT 72,00,000 + BDT 3,00,000 advance + Possession in 45 days<br />
- Counter 1 (Seller): BDT 73,50,000 + BDT 3,50,000 advance + Possession in 60 days<br />
- Counter 2 (Buyer): BDT 73,00,000 + BDT 3,50,000 advance + Possession in 60 days<br />
- Status: ACCEPTED<br />
- Transaction ID: TXN-BAN-2024-0045 created</p>
<hr />
<h4 id="us-b5-transaction-tracking-document-management">US-B5: Transaction Tracking &amp; Document Management</h4>
<p><strong>As a</strong> buyer,<br />
<strong>I want to</strong> track all transaction steps (Bayna, Dalil, Namjari) and upload proof documents at each milestone,<br />
<strong>So that</strong> I have a complete digital record of the property purchase process.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>After offer acceptance, Sumaiya and the seller proceed with the legal process. They prepare Bayna (agreement to sell), register the Dalil at the Sub-Registrar office, and apply for Namjari (mutation). Sumaiya uploads proof of each step into the platform's transaction timeline, and both parties can see the progress.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Transaction timeline shows all steps:<br />
  1. Offer Accepted<br />
  2. Document Collection Started<br />
  3. Ownership Verification Complete<br />
  4. Bayna Agreement Signed<br />
  5. Legal Review Complete<br />
  6. Payment/Token Money<br />
  7. Dalil Registration Complete<br />
  8. Namjari Application Submitted<br />
  9. Namjari Approved<br />
  10. Land Tax Payment Complete<br />
  11. Handover Complete<br />
  12. Transaction Closed<br />
- Each step shows:<br />
  - Status: Pending / In Progress / Complete / Verified<br />
  - Required proof documents<br />
  - Upload date and uploader name<br />
  - Admin verification status (if applicable)<br />
- Both buyer and seller can upload documents<br />
- Admin/verifier can review and approve documents<br />
- System sends reminders if a step is pending for &gt; 7 days<br />
- Government portal link-outs provided for Namjari and Land Tax steps<br />
- User can add notes/comments at each step<br />
- Complete audit trail with timestamps maintained</p>
<p><strong>Test Data:</strong><br />
- Transaction ID: TXN-BAN-2024-0045<br />
- Step 1: Offer Accepted (2024-01-20) - Auto-logged<br />
- Step 4: Bayna signed (2024-01-27) - Buyer uploaded Bayna PDF<br />
- Step 7: Dalil registered (2024-02-15) - Seller uploaded Dalil copy<br />
- Step 8: Namjari submitted (2024-02-20) - Buyer added portal ref: MUT-DHK-2024-12345<br />
- Step 9: Namjari approved (2024-03-10) - Buyer uploaded updated Khatian<br />
- Step 11: Handover (2024-03-15) - Both parties confirmed<br />
- Step 12: Closed (2024-03-16) - Reviews enabled</p>
<hr />
<h4 id="us-b6-secure-payment-with-otp3ds">US-B6: Secure Payment with OTP/3DS</h4>
<p><strong>As a</strong> buyer,<br />
<strong>I want to</strong> pay booking money or token money securely through the platform with OTP verification,<br />
<strong>So that</strong> I have a verifiable payment record linked to the transaction.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Sumaiya needs to pay BDT 3,50,000 as booking money after Bayna is signed. She selects bKash as payment method, enters the amount, and completes OTP verification. The payment is recorded in the transaction timeline and both parties receive confirmation.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- User can select payment gateway: bKash / Nagad / SSLCommerz (card/e-banking)<br />
- System creates payment intent with unique idempotency key<br />
- User is redirected to gateway hosted checkout<br />
- User completes OTP/3DS verification via gateway<br />
- System receives IPN (Instant Payment Notification) from gateway<br />
- System validates payment via gateway validation API<br />
- On successful validation:<br />
  - Order status updated to PAID<br />
  - Transaction step updated<br />
  - Payment receipt generated with reference number<br />
  - Email/SMS confirmation sent to both parties<br />
- On risky payment flag:<br />
  - Order placed in HOLD status<br />
  - Admin manual verification required<br />
- All payment events logged for reconciliation<br />
- Payment failures trigger automatic refund initiation<br />
- Payment timeout (30 min) auto-cancels order</p>
<p><strong>Test Data:</strong><br />
- Transaction ID: TXN-BAN-2024-0045<br />
- Payment Amount: BDT 3,50,000<br />
- Gateway: bKash<br />
- Payment ID: PAY-BAN-2024-0045-001<br />
- Gateway Transaction ID: BK-DHK-20240127-987654<br />
- OTP Sent: +880-1712-XXXXXX<br />
- Payment Status: SUCCESS<br />
- Validation: Amount matched, Transaction ID matched<br />
- Order Status: PAID<br />
- Receipt ID: RCP-2024-0045-001</p>
<hr />
<h4 id="us-b7-post-transaction-rating-review">US-B7: Post-Transaction Rating &amp; Review</h4>
<p><strong>As a</strong> buyer,<br />
<strong>I want to</strong> rate and review the seller/agent after transaction completion,<br />
<strong>So that</strong> I can share my experience and help future buyers make informed decisions.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>After successfully moving into the apartment, Sumaiya wants to leave a positive review for the agent who was responsive and professional throughout the process. She rates 5 stars and writes about the smooth transaction experience.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Review option enabled only after transaction status = COMPLETED<br />
- User can provide:<br />
  - Overall rating (1-5 stars)<br />
  - Category ratings: Communication, Professionalism, Transparency, Timeliness<br />
  - Written review (min 50 characters)<br />
  - Option to recommend (Yes/No)<br />
- User can upload photos (optional)<br />
- System prevents duplicate reviews for same transaction<br />
- Review visible on seller/agent profile after approval<br />
- Seller/agent can respond to review (within 30 days)<br />
- User can report fake/spam reviews<br />
- Average rating auto-calculated and displayed on profile<br />
- Reviews count toward seller/agent reputation score</p>
<p><strong>Test Data:</strong><br />
- Transaction ID: TXN-BAN-2024-0045<br />
- Reviewer: Sumaiya Akter (Buyer)<br />
- Reviewed: Agent XYZ Real Estate<br />
- Overall Rating: 5/5<br />
- Communication: 5/5<br />
- Professionalism: 5/5<br />
- Transparency: 4/5<br />
- Timeliness: 5/5<br />
- Review Text: "Excellent service! The agent was very responsive and helped us complete all the legal formalities smoothly. Highly recommended!"<br />
- Recommendation: Yes<br />
- Review Date: 2024-03-18<br />
- Agent Response: "Thank you for your kind words! It was a pleasure assisting you."</p>
<hr />
<h3 id="92-seller-agent-stories-detailed-scenarios">9.2 Seller / Agent Stories - Detailed Scenarios</h3>
<h4 id="us-s1-listing-creation-with-complete-details">US-S1: Listing Creation with Complete Details</h4>
<p><strong>As a</strong> real estate agent,<br />
<strong>I want to</strong> create a comprehensive property listing with all required details, media, and documents,<br />
<strong>So that</strong> I can attract serious buyers and achieve high accuracy score.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Rafiq Ahmed, a URA-certified agent, has a new listing - a 2,000 sqft apartment in Dhanmondi. He wants to create a detailed listing with photos, floor plan, and ownership documents to establish trust and get quick responses.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Agent can create listing with:<br />
  - Property type: Apartment/Flat, Land, Commercial/Project<br />
  - Location: Area, road, block, landmarks, map pin<br />
  - Specifications: Size (sqft/katha), bedrooms, bathrooms, floor, facing<br />
  - Pricing: Asking price, negotiable (Yes/No), price per sqft<br />
  - Amenities: Parking, lift, generator, gas, water, security<br />
  - Possession: Ready/Under construction/Future, handover date<br />
  - Legal status: Ownership type, approval status<br />
- Agent can upload:<br />
  - Photos (min 10, max 50) with auto-resize and compression<br />
  - Virtual tour link (optional)<br />
  - Floor plan PDF (optional)<br />
  - Documents to vault: Dalil, Mutation, Tax Receipt, NOC, Allotment Letter<br />
- System calculates accuracy score in real-time as fields are filled<br />
- Draft listing can be saved and resumed later<br />
- Agent can submit for verification when ready<br />
- System validates required fields before submission<br />
- After submission, listing status = UNDER_REVIEW<br />
- Agent receives confirmation and estimated review time</p>
<p><strong>Test Data:</strong><br />
- Property Type: Apartment/Flat<br />
- Location: Road 5, Dhanmondi R/A, Dhaka-1205<br />
- Size: 2,000 sqft<br />
- Bedrooms: 3, Bathrooms: 3<br />
- Floor: 7th, Facing: South<br />
- Price: BDT 95,00,000 (BDT 4,750/sqft)<br />
- Amenities: Parking (1 car), Lift (Yes), Generator (Yes), Gas (Yes)<br />
- Photos: 15 uploaded<br />
- Documents: Dalil (uploaded), Mutation (uploaded), Tax Receipt (uploaded)<br />
- Accuracy Score: 94%<br />
- Status: SUBMITTED for review<br />
- Listing ID: DHN-APT-2024-0078</p>
<hr />
<h4 id="us-s2-professional-verification">US-S2: Professional Verification</h4>
<p><strong>As a</strong> URA-certified real estate agent,<br />
<strong>I want to</strong> submit my professional verification documents and receive verified badge,<br />
<strong>So that</strong> buyers trust my listings and I get priority in search results.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Rafiq wants to establish credibility on the platform. He uploads his URA certificate, NID, trade license, and bank account details for verification. After admin review, he receives the "URA Verified Agent" badge which is prominently displayed on his profile and all his listings.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Agent can access Professional Verification section from profile<br />
- Agent uploads documents based on role:<br />
  - Real Estate Agent: URA certificate (if applicable), NID, Trade License, Bank Details<br />
  - Legal Agent: BAR Council certificate, NID, Firm Registration, Bank Details<br />
  - Financial Agent: Institute credential report, Authorization Letter, NID<br />
- Agent provides business information:<br />
  - Company name, registration number, office address<br />
  - Contact numbers, email, website<br />
  - Service areas, specializations<br />
- System validates file formats (PDF/JPG/PNG), size limits (max 5MB per file)<br />
- Verification request status: PENDING → UNDER_REVIEW → APPROVED/REJECTED<br />
- Admin/verifier can:<br />
  - View all uploaded documents<br />
  - Verify document authenticity<br />
  - Approve/reject with reason<br />
  - Request additional documents<br />
- On approval:<br />
  - Verified badge enabled on profile<br />
  - Badge type shown: "URA Verified Agent", "Legal Expert", "Financial Advisor"<br />
  - Verification date displayed<br />
  - Agent listed in verified directory<br />
- On rejection:<br />
  - Reason provided<br />
  - Agent can resubmit with corrections<br />
- Email/SMS notifications sent at each status change</p>
<p><strong>Test Data:</strong><br />
- Agent: Rafiq Ahmed<br />
- Role: Real Estate Agent<br />
- URA Certificate: URA-DHK-2022-5678 (uploaded)<br />
- NID: 1234567890123 (uploaded)<br />
- Trade License: TRAD-DHK-2020-9876 (uploaded)<br />
- Company: Rafiq Properties Ltd.<br />
- Office: House 45, Road 11, Dhanmondi, Dhaka<br />
- Verification Status: APPROVED<br />
- Badge: "URA Verified Agent"<br />
- Verification Date: 2024-01-10<br />
- Badge Expiry: 2025-01-10 (annual renewal required)</p>
<hr />
<h4 id="us-s3-inquiry-appointment-management">US-S3: Inquiry &amp; Appointment Management</h4>
<p><strong>As a</strong> seller/agent,<br />
<strong>I want to</strong> receive inquiries via chat, manage appointment requests, and respond quickly,<br />
<strong>So that</strong> I can convert leads into transactions and maintain high response rate.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Rafiq receives 5 inquiries on his Dhanmondi listing within the first week. He responds to each within 2 hours, books 3 property visits, and his response rate metric improves to 98% with average response time of 1.5 hours.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Agent receives real-time notifications for:<br />
  - New chat messages<br />
  - Appointment requests<br />
  - Offer submissions<br />
  - Document access requests<br />
- Agent dashboard shows:<br />
  - Unread messages count<br />
  - Pending appointments<br />
  - Response time metrics (7-day, 30-day average)<br />
  - Response rate percentage<br />
- Agent can:<br />
  - Respond to chat from web/mobile app<br />
  - Accept/reschedule/decline appointments with reason<br />
  - View appointment calendar with all bookings<br />
  - Set availability schedule and auto-block unavailable slots<br />
  - Enable/disable auto-responses for busy periods<br />
- System tracks:<br />
  - Time to first response for each inquiry<br />
  - Appointment acceptance rate<br />
  - No-show rate<br />
- Response SLA targets:<br />
  - Chat messages: Respond within 2 hours (recommended)<br />
  - Appointments: Accept/decline within 4 hours (recommended)<br />
- System sends reminders if response pending &gt; SLA target<br />
- Poor response metrics trigger warning notification<br />
- Excellent response metrics earn "Quick Responder" badge</p>
<p><strong>Test Data:</strong><br />
- Agent: Rafiq Ahmed<br />
- Listing: DHN-APT-2024-0078<br />
- Week 1 Inquiries: 5 chat conversations, 3 appointment requests<br />
- Response Metrics:<br />
  - Average response time: 1 hour 35 minutes (Target: &lt; 2 hours) ✓<br />
  - Response rate: 100% (5/5 responded)<br />
  - Appointment acceptance: 100% (3/3 accepted)<br />
- Badges Earned: "Quick Responder" (response time &lt; 2 hours for 7 days)<br />
- Calendar: 3 appointments scheduled (Jan 25, Jan 27, Jan 29)</p>
<hr />
<h4 id="us-s4-offer-negotiation-acceptance">US-S4: Offer Negotiation &amp; Acceptance</h4>
<p><strong>As a</strong> seller/agent,<br />
<strong>I want to</strong> receive offers, negotiate terms, and accept the best offer,<br />
<strong>So that</strong> I can close the deal at optimal price with serious buyers.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Rafiq receives 2 offers on the Dhanmondi listing: Offer A at BDT 92 Lakh (cash buyer, 30-day possession) and Offer B at BDT 93 Lakh (loan buyer, 60-day possession). He discusses with the owner and counters Offer A at BDT 93 Lakh with 45-day possession. Buyer A accepts and the deal is closed.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Agent receives notification for each new offer<br />
- Agent can view offer details:<br />
  - Offered price vs. asking price<br />
  - Advance/booking money proposed<br />
  - Possession timeline<br />
  - Financing method (cash/loan)<br />
  - Buyer verification status<br />
  - Buyer rating/reputation (if available)<br />
- Agent can:<br />
  - Accept offer immediately (creates transaction)<br />
  - Counter with new terms (price, advance, timeline)<br />
  - Reject with reason (e.g., "Price too low", "Prefer cash buyer")<br />
  - Request buyer to increase offer<br />
- Agent can compare multiple offers side-by-side<br />
- System tracks offer history and negotiation rounds<br />
- After acceptance:<br />
  - Transaction automatically created<br />
  - Both parties notified<br />
  - Listing status changes to "Under Transaction" or "Sold Pending"<br />
  - Other pending offers auto-rejected with notification<br />
- Seller/owner receives offer summary via email/SMS for approval</p>
<p><strong>Test Data:</strong><br />
- Listing: DHN-APT-2024-0078<br />
- Asking Price: BDT 95,00,000</p>
<p><strong>Offer A:</strong><br />
- Buyer: Sumaiya Akter (Verified)<br />
- Offered Price: BDT 92,00,000<br />
- Advance: BDT 3,00,000<br />
- Possession: 30 days<br />
- Financing: Cash<br />
- Agent Action: COUNTER at BDT 93,00,000, 45 days<br />
- Buyer Response: ACCEPTED<br />
- Status: DEAL CLOSED<br />
- Transaction: TXN-DHN-2024-0078 created</p>
<p><strong>Offer B:</strong><br />
- Buyer: Karim Hassan<br />
- Offered Price: BDT 93,00,000<br />
- Advance: BDT 2,50,000<br />
- Possession: 60 days<br />
- Financing: Bank Loan<br />
- Agent Action: REJECTED (Deal closed with Offer A)</p>
<hr />
<h4 id="us-s5-review-management-reputation">US-S5: Review Management &amp; Reputation</h4>
<p><strong>As a</strong> seller/agent,<br />
<strong>I want to</strong> receive reviews after transaction completion and respond to feedback,<br />
<strong>So that</strong> I can build my reputation and address any concerns professionally.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>After the successful transaction, Rafiq receives a 5-star review from Sumaiya praising his professionalism. He responds with gratitude. Over 6 months, he accumulates 15 reviews with an average rating of 4.8/5, which boosts his profile visibility.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Agent receives notification when a review is posted<br />
- Agent can view review details:<br />
  - Overall rating and category ratings<br />
  - Written review text<br />
  - Reviewer name and transaction details<br />
  - Review date<br />
- Agent can respond to review (within 30 days):<br />
  - Thank positive reviews<br />
  - Address concerns in negative reviews professionally<br />
  - Provide clarifications if needed<br />
- Response character limit: 500 characters<br />
- Agent cannot delete reviews (only admin can remove inappropriate reviews)<br />
- Agent profile shows:<br />
  - Average overall rating<br />
  - Total number of reviews<br />
  - Rating distribution (5-star: X%, 4-star: Y%, ...)<br />
  - Recent reviews (latest 5)<br />
  - Response rate to reviews<br />
- High ratings (4.5+ with 10+ reviews) earn "Top Rated" badge<br />
- Agent can request dissatisfied clients to revise review after issue resolution<br />
- Agent can report fake/spam reviews for admin investigation</p>
<p><strong>Test Data:</strong><br />
- Agent: Rafiq Ahmed<br />
- Total Reviews: 15<br />
- Average Rating: 4.8/5<br />
- Rating Distribution:<br />
  - 5-star: 12 reviews (80%)<br />
  - 4-star: 2 reviews (13%)<br />
  - 3-star: 1 review (7%)<br />
  - 2-star: 0<br />
  - 1-star: 0<br />
- Response Rate: 100% (15/15 responses)<br />
- Badges: "Top Rated Agent", "Quick Responder", "URA Verified"<br />
- Latest Review:<br />
  - From: Sumaiya Akter<br />
  - Rating: 5/5<br />
  - Review: "Excellent service! Highly professional and responsive."<br />
  - Agent Response: "Thank you Sumaiya! It was a pleasure assisting you with your new home. Wishing you all the best!"<br />
  - Response Date: 2024-03-19</p>
<hr />
<h3 id="93-legal-agent-stories-detailed-scenarios">9.3 Legal Agent Stories - Detailed Scenarios</h3>
<h4 id="us-l1-legal-service-discovery-booking">US-L1: Legal Service Discovery &amp; Booking</h4>
<p><strong>As a</strong> verified legal agent (lawyer),<br />
<strong>I want to</strong> list my legal services and receive booking requests from buyers/sellers,<br />
<strong>So that</strong> I can provide property vetting and legal assistance services.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Advocate Tahmina Sultana is a practicing lawyer specializing in property law. She creates her professional profile on MSC Home, lists her services (property vetting, title verification, document preparation), and sets her consultation fee. She receives a booking from Sumaiya who needs legal review before finalizing the Dhanmondi apartment purchase.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Legal agent can create professional profile with:<br />
  - BAR Council registration number and certificate<br />
  - Areas of specialization (property law, civil law, etc.)<br />
  - Service offerings: Property vetting, Title search, Document preparation, Court representation<br />
  - Consultation fee structure<br />
  - Office location and availability schedule<br />
- Legal agent can list services with:<br />
  - Service name and description<br />
  - Pricing (fixed/hourly)<br />
  - Estimated turnaround time<br />
  - Required documents from client<br />
- Buyer/seller can:<br />
  - Search legal agents by location, specialization, rating<br />
  - View agent profile, credentials, and reviews<br />
  - Book service by selecting service type and preferred date/time<br />
  - Upload case documents via secure document vault<br />
- Legal agent receives booking notification with:<br />
  - Client details and transaction reference<br />
  - Service requested<br />
  - Uploaded documents<br />
  - Client contact information<br />
- Legal agent can:<br />
  - Accept/decline booking<br />
  - Request additional documents<br />
  - Provide preliminary assessment<br />
  - Schedule consultation appointment<br />
- System tracks:<br />
  - Case status: New / Document Review / In Progress / Completed<br />
  - Milestones and deliverables<br />
  - Payment status<br />
- Legal agent delivers report via document vault<br />
- Client can rate legal service after completion</p>
<p><strong>Test Data:</strong><br />
- Legal Agent: Advocate Tahmina Sultana<br />
- BAR Registration: BAR-DHK-2015-4567<br />
- Specialization: Property Law, Title Verification<br />
- Service: Property Vetting &amp; Title Search<br />
- Fee: BDT 15,000 (Fixed)<br />
- Turnaround: 5-7 business days<br />
- Client: Sumaiya Akter<br />
- Transaction: TXN-DHN-2024-0078<br />
- Documents Uploaded: Dalil copy, Mutation copy, Tax receipts<br />
- Booking Date: 2024-02-01<br />
- Service Status: COMPLETED<br />
- Report Delivered: 2024-02-07 (Property Title Clear, No Legal Issues Found)<br />
- Client Rating: 5/5</p>
<hr />
<h3 id="94-admin-verifier-stories-detailed-scenarios">9.4 Admin / Verifier Stories - Detailed Scenarios</h3>
<h4 id="us-a1-verification-queue-management">US-A1: Verification Queue Management</h4>
<p><strong>As an</strong> admin/verifier,<br />
<strong>I want to</strong> review pending verification requests and approve/reject with proper audit trail,<br />
<strong>So that</strong> only genuine verified users and listings appear on the platform.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>Admin Minhaz reviews the verification queue every morning. He has 12 pending identity verifications, 5 professional verifications, and 8 listing verifications. He processes each request by checking documents, verifying authenticity, and making decisions with reasons logged.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Admin dashboard shows verification queues:<br />
  - Identity Verification (Individual users)<br />
  - Professional Verification (Agents, Lawyers, Financial Advisors)<br />
  - Listing Verification (Property ownership and details)<br />
  - Document Verification (Transaction step proofs)<br />
- Each queue shows:<br />
  - Pending count<br />
  - Average wait time<br />
  - Oldest pending request<br />
  - Priority flags (if any)<br />
- Admin can filter/sort by:<br />
  - Submission date (oldest first)<br />
  - Request type<br />
  - User type<br />
  - Priority<br />
- For each verification request, admin can:<br />
  - View all uploaded documents (with zoom/download)<br />
  - Check user/agent profile and history<br />
  - View related listings/transactions<br />
  - Add internal notes (visible to other admins only)<br />
  - Approve with verification date and badge type<br />
  - Reject with reason (dropdown + free text)<br />
  - Request more information/documents<br />
- On approval:<br />
  - Verified badge enabled immediately<br />
  - User/agent notified via email/SMS<br />
  - Verification expiry date set (if applicable)<br />
  - Audit log entry created<br />
- On rejection:<br />
  - Reason sent to user<br />
  - User can resubmit with corrections<br />
  - Rejection reason logged<br />
- Admin performance metrics tracked:<br />
  - Verification processing time<br />
  - Approval/rejection rate<br />
  - Re-submission rate</p>
<p><strong>Test Data:</strong><br />
- Admin: Minhaz Rahman<br />
- Date: 2024-01-10<br />
- Queue Status:<br />
  - Identity Verification: 12 pending<br />
  - Professional Verification: 5 pending<br />
  - Listing Verification: 8 pending<br />
- Sample Review:<br />
  - Request ID: VER-PRO-2024-0089<br />
  - User: Rafiq Ahmed<br />
  - Type: Professional (Real Estate Agent)<br />
  - Documents: URA Certificate, NID, Trade License<br />
  - Submission Date: 2024-01-08<br />
  - Admin Decision: APPROVED<br />
  - Badge Granted: "URA Verified Agent"<br />
  - Processing Time: 2 days<br />
  - Audit Log: "Verified URA certificate DHK-2022-5678, NID matched, Trade License valid"</p>
<hr />
<h4 id="us-a2-dispute-resolution-management">US-A2: Dispute Resolution Management</h4>
<p><strong>As an</strong> admin/support agent,<br />
<strong>I want to</strong> review dispute cases, investigate evidence, and make fair resolution decisions,<br />
<strong>So that</strong> buyer-seller conflicts are resolved transparently with proper documentation.</p>
<p><strong>Real-Life Scenario:</strong><br />
<em>A buyer files a dispute claiming the property handover was delayed by 30 days beyond the agreed timeline. Admin reviews the transaction timeline, chat history, and uploaded proofs. After investigation, admin determines the delay was due to seller's fault and approves a partial refund of booking money to compensate for the delay.</em></p>
<p><strong>Acceptance Criteria:</strong><br />
- Admin can view all dispute cases with filters:<br />
  - Status: Open / Under Review / Mediation / Resolved / Closed<br />
  - Priority: Critical / High / Medium / Low<br />
  - Type: Payment dispute, Delivery dispute, Quality dispute, Fraud claim<br />
  - Transaction amount range<br />
- Each dispute case shows:<br />
  - Transaction details and parties involved<br />
  - Dispute reason and description<br />
  - Evidence uploaded by both parties<br />
  - Chat history and communication logs<br />
  - Transaction timeline with all steps<br />
  - Payment records<br />
- Admin can:<br />
  - Request additional evidence from either party<br />
  - Add investigation notes (internal)<br />
  - Escalate to senior admin<br />
  - Propose resolution with options:<br />
    - Full refund<br />
    - Partial refund (specify amount and reason)<br />
    - Cancel order with no refund<br />
    - Continue transaction with corrective steps<br />
    - Impose penalty on violating party<br />
  - Set resolution deadline<br />
- Both parties are notified of proposed resolution<br />
- Parties can accept or appeal resolution (within 7 days)<br />
- On acceptance:<br />
  - Resolution executed (refund processed, order updated)<br />
  - Case status: RESOLVED<br />
  - Both parties notified<br />
  - Review eligibility updated<br />
- On appeal:<br />
  - Case escalated to senior admin<br />
  - Additional review conducted<br />
- Final decision is binding<br />
- Complete audit trail maintained</p>
<p><strong>Test Data:</strong><br />
- Dispute ID: DIS-2024-0023<br />
- Transaction: TXN-DHN-2024-0078<br />
- Opened By: Sumaiya Akter (Buyer)<br />
- Dispute Type: Delivery Delay<br />
- Reason: "Handover delayed by 30 days from agreed date"<br />
- Evidence (Buyer):<br />
  - Transaction timeline showing agreed handover: 2024-03-15<br />
  - Chat messages with seller confirming date<br />
  - Actual handover: 2024-04-15<br />
- Evidence (Seller):<br />
  - Claim: "Delay due to pending Namjari approval"<br />
  - No proof of communication about delay<br />
- Admin Investigation:<br />
  - Reviewed transaction timeline<br />
  - Checked chat history<br />
  - Found: Seller did not inform buyer proactively about delay<br />
  - Found: Delay caused inconvenience (buyer paid rent for 30 extra days)<br />
- Admin Decision:<br />
  - Partial refund: BDT 30,000 (compensation for rent paid during delay)<br />
  - Warning issued to seller for poor communication<br />
  - Case status: RESOLVED<br />
- Refund processed: 2024-04-20<br />
- Buyer Response: Accepted<br />
- Case Closed: 2024-04-21</p>
<hr />
<h2 id="95-user-story-summary-matrix">9.5 User Story Summary Matrix</h2>
<table>
<thead>
<tr>
<th>Story ID</th>
<th>User Type</th>
<th>Feature</th>
<th>Priority</th>
<th>Complexity</th>
<th>Dependencies</th>
</tr>
</thead>
<tbody>
<tr>
<td>US-B1</td>
<td>Buyer</td>
<td>Property Search</td>
<td>P0</td>
<td>Medium</td>
<td>FR-19, FR-20</td>
</tr>
<tr>
<td>US-B2</td>
<td>Buyer</td>
<td>Listing Details</td>
<td>P0</td>
<td>Medium</td>
<td>FR-12, FR-13, FR-16</td>
</tr>
<tr>
<td>US-B3</td>
<td>Buyer</td>
<td>Chat &amp; Appointments</td>
<td>P0</td>
<td>High</td>
<td>FR-23, FR-25</td>
</tr>
<tr>
<td>US-B4</td>
<td>Buyer</td>
<td>Offer &amp; Negotiation</td>
<td>P0</td>
<td>High</td>
<td>FR-27, FR-28</td>
</tr>
<tr>
<td>US-B5</td>
<td>Buyer</td>
<td>Transaction Tracking</td>
<td>P0</td>
<td>High</td>
<td>FR-29, FR-32, FR-66-69</td>
</tr>
<tr>
<td>US-B6</td>
<td>Buyer</td>
<td>Secure Payment</td>
<td>P0</td>
<td>High</td>
<td>FR-33, FR-34, FR-70-74</td>
</tr>
<tr>
<td>US-B7</td>
<td>Buyer</td>
<td>Reviews</td>
<td>P0</td>
<td>Low</td>
<td>FR-41, FR-42</td>
</tr>
<tr>
<td>US-S1</td>
<td>Seller/Agent</td>
<td>Listing Creation</td>
<td>P0</td>
<td>High</td>
<td>FR-12, FR-13</td>
</tr>
<tr>
<td>US-S2</td>
<td>Seller/Agent</td>
<td>Verification</td>
<td>P0</td>
<td>Medium</td>
<td>FR-8, FR-9, FR-10</td>
</tr>
<tr>
<td>US-S3</td>
<td>Seller/Agent</td>
<td>Inquiry Management</td>
<td>P0</td>
<td>Medium</td>
<td>FR-23, FR-25, FR-26a-c</td>
</tr>
<tr>
<td>US-S4</td>
<td>Seller/Agent</td>
<td>Offer Management</td>
<td>P0</td>
<td>High</td>
<td>FR-27, FR-28</td>
</tr>
<tr>
<td>US-S5</td>
<td>Seller/Agent</td>
<td>Review Management</td>
<td>P0</td>
<td>Low</td>
<td>FR-42, FR-43</td>
</tr>
<tr>
<td>US-L1</td>
<td>Legal Agent</td>
<td>Service Booking</td>
<td>P0</td>
<td>Medium</td>
<td>FR-36, FR-37, FR-38</td>
</tr>
<tr>
<td>US-A1</td>
<td>Admin</td>
<td>Verification Queue</td>
<td>P0</td>
<td>High</td>
<td>FR-9, FR-76, FR-78</td>
</tr>
<tr>
<td>US-A2</td>
<td>Admin</td>
<td>Dispute Resolution</td>
<td>P1</td>
<td>High</td>
<td>FR-57, FR-88, FR-89, FR-90</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="93-legal-financial">9.3 Legal / Financial</h3>
<ul>
<li><strong>US-L1:</strong> Verified legal agent receives bookings and provides vetting report.</li>
<li><strong>US-F1:</strong> Verified financial agent receives loan support requests.</li>
</ul>
<h3 id="94-admin-verifier">9.4 Admin / Verifier</h3>
<ul>
<li><strong>US-A1:</strong> Review verification requests and approve/reject with reason.</li>
<li><strong>US-A2:</strong> Review disputes and resolve with auditable decisions.</li>
</ul>
<hr />
<h2 id="10-data-requirements_1">10. Data Requirements</h2>
<h3 id="101-core-entities-mvp">10.1 Core Entities (MVP)</h3>
<ul>
<li>User, Role, UserRole</li>
<li>VerificationRequest, VerificationDecision, Document</li>
<li>PropertyListing, ListingMedia, Favorite</li>
<li>Offer</li>
<li>Transaction, TransactionStep</li>
<li>Order, Payment</li>
<li>Review</li>
<li>Appointment</li>
<li>ChatThread, ChatParticipant, Message</li>
<li>AuditLog</li>
</ul>
<p>Additional (P1):<br />
- ServiceListing, ServiceOrder, ServiceProviderProfile, PayoutAccount<br />
- LandPortalReference (stores mutation/dlrms/ldtax reference metadata per transaction)</p>
<h3 id="102-bd-specific-document-types-suggested">10.2 BD-specific Document Types (suggested)</h3>
<ul>
<li>NID (front/back)</li>
<li>Deed copy (Dalil)</li>
<li>Bayna agreement copy</li>
<li>Mutation/Namjari paper(s)</li>
<li>Tax receipt / DCR (where applicable)</li>
</ul>
<h3 id="103-additional-entities-tables-v30-gaps-closed">10.3 Additional Entities / Tables (v3.0 gaps closed)</h3>
<p>Operational &amp; compliance-oriented data that enables auditability and safe workflows:</p>
<ul>
<li><strong>ListingStatusHistory</strong>: listing_id, from_status, to_status, reason_code, notes, actor_user_id, created_at.</li>
<li><strong>ListingVerificationChecklist</strong> (optional): listing_id, check_type, status, verifier_notes, evidence_document_id, created_at.</li>
<li><strong>DocumentAccessRequest</strong>: requester_user_id, listing_id (optional), transaction_id (optional), requested_doc_ids, purpose, status, created_at.</li>
<li><strong>DocumentAccessGrant</strong>: request_id, granter_user_id, allowed_doc_ids, can_download, expires_at, revoked_at.</li>
<li><strong>Dispute</strong>: order_id, opened_by_user_id, dispute_type, status, summary, opened_at, resolved_at.</li>
<li><strong>DisputeEvidence</strong>: dispute_id, uploader_user_id, document_id, note, created_at.</li>
<li><strong>Refund</strong>: payment_id, dispute_id (optional), provider_refund_id, amount, currency, status, initiated_by_user_id, created_at.</li>
<li><strong>Notification</strong>: user_id, type, channel, payload_json, status (queued/sent/failed), created_at.</li>
<li><strong>NotificationPreference</strong>: user_id, category, channel, enabled, quiet_hours.</li>
<li><strong>ModerationCase</strong>: target_type (listing/user/message), target_id, reporter_user_id, reason, status, action_taken, created_at.</li>
<li><strong>DeviceSession</strong> (optional): user_id, device_fingerprint, refresh_token_id, last_seen_at, revoked_at.</li>
<li><strong>PaymentEvent</strong>: payment_id, provider_event_type, raw_payload_hash, received_at, processed_at, processing_result.</li>
<li><strong>LandPortalReference</strong> (from v2.2): extend to include portal_type, reference_id(s), mobile_used, notes, attachments.</li>
<li><strong>LandPortalStatusSnapshot</strong> (new): portal_reference_id, captured_by_user_id, status_text, captured_at, evidence_document_id (optional).</li>
</ul>
<hr />
<h2 id="11-erd-mermaid">11. ERD (Mermaid)</h2>
<h3 id="111-core-marketplace-erd">11.1 Core Marketplace ERD</h3>
<div class="mermaid my-8">
erDiagram
    USER ||--o{ USER_ROLE : has
    ROLE ||--o{ USER_ROLE : assigned

    USER ||--o{ VERIFICATION_REQUEST : submits
    VERIFICATION_REQUEST ||--o{ DOCUMENT : includes
    USER ||--o{ DOCUMENT : uploads
    VERIFICATION_REQUEST ||--o| VERIFICATION_DECISION : resolved_by

    USER ||--o{ PROPERTY_LISTING : creates
    PROPERTY_LISTING ||--o{ LISTING_MEDIA : has
    USER ||--o{ FAVORITE : saves
    PROPERTY_LISTING ||--o{ FAVORITE : saved

    PROPERTY_LISTING ||--o{ OFFER : receives
    USER ||--o{ OFFER : makes

    OFFER ||--o| TRANSACTION : accepted_creates
    TRANSACTION ||--o{ TRANSACTION_STEP : tracks
    TRANSACTION ||--o{ ORDER : generates
    ORDER ||--o{ PAYMENT : has

    USER ||--o{ REVIEW : writes
    TRANSACTION ||--o{ REVIEW : after_completion

    USER ||--o{ APPOINTMENT : books
    USER ||--o{ APPOINTMENT : receives

    CHAT_THREAD ||--o{ MESSAGE : contains
    CHAT_THREAD ||--o{ CHAT_PARTICIPANT : has
    USER ||--o{ CHAT_PARTICIPANT : joins

    AUDIT_LOG }o--|| USER : actor

    USER {
        string id PK
        string phone UK
        string email UK
        string name
        boolean is_verified
        datetime created_at
    }
    PROPERTY_LISTING {
        string id PK
        string owner_user_id FK
        string title
        string location_text
        float price
        float area_sqft
        boolean is_verified
        int accuracy_score
        string status
    }
    TRANSACTION {
        string id PK
        string offer_id FK
        string status
        datetime created_at
    }
    PAYMENT {
        string id PK
        string order_id FK
        string provider
        string status
        float amount
    }
</div>

<h3 id="112-extended-operational-erd-v30-addendum">11.2 Extended Operational ERD (v3.0 Addendum)</h3>
<div class="mermaid my-8">
erDiagram
    PROPERTY_LISTING ||--o{ LISTING_STATUS_HISTORY : has
    PROPERTY_LISTING ||--o{ LISTING_VERIFICATION_CHECK : verified_by

    USER ||--o{ DOCUMENT_ACCESS_REQUEST : requests
    PROPERTY_LISTING ||--o{ DOCUMENT_ACCESS_REQUEST : for_listing
    DOCUMENT_ACCESS_REQUEST ||--o| DOCUMENT_ACCESS_GRANT : approved_creates
    USER ||--o{ DOCUMENT_ACCESS_GRANT : grants
    DOCUMENT_ACCESS_GRANT ||--o{ DOCUMENT_ACCESS_GRANT_ITEM : includes
    DOCUMENT_ACCESS_GRANT_ITEM }o--|| DOCUMENT : allows

    ORDER ||--o{ DISPUTE : may_have
    DISPUTE ||--o{ DISPUTE_EVIDENCE : includes
    DISPUTE_EVIDENCE }o--|| DOCUMENT : evidence
    PAYMENT ||--o{ REFUND : may_have

    USER ||--o{ NOTIFICATION_PREFERENCE : sets
    USER ||--o{ NOTIFICATION : receives

    USER ||--o{ MODERATION_CASE : reports
    MODERATION_CASE }o--|| USER : handled_by

    TRANSACTION ||--o{ LAND_PORTAL_REFERENCE : tracks
    LAND_PORTAL_REFERENCE ||--o{ LAND_PORTAL_STATUS_SNAPSHOT : snapshots

    LISTING_STATUS_HISTORY {
        string id PK
        string listing_id FK
        string from_status
        string to_status
        string reason_code
        string actor_user_id FK
        datetime created_at
    }
    DOCUMENT_ACCESS_GRANT {
        string id PK
        string request_id FK
        string granter_user_id FK
        boolean can_download
        datetime expires_at
        datetime revoked_at
    }
    DISPUTE {
        string id PK
        string order_id FK
        string opened_by_user_id FK
        string status
        datetime opened_at
        datetime resolved_at
    }
    REFUND {
        string id PK
        string payment_id FK
        string provider_refund_id
        float amount
        string status
    }
</div>

<hr />
<h3 id="113-auth-social-login-credentials-erd-v31-addendum">11.3 Auth, Social Login &amp; Credentials ERD (v3.1 Addendum)</h3>
<div class="mermaid my-8">
erDiagram
    USER ||--o{ SOCIAL_ACCOUNT : has
    USER ||--o{ VERIFICATION_REQUEST : submits
    VERIFICATION_REQUEST ||--o{ VERIFICATION_DOCUMENT : includes
    VERIFICATION_REQUEST }o--|| VERIFICATION_BADGE : results_in

    USER ||--o{ CREDENTIAL_REPORT : attaches
    CREDENTIAL_ISSUER ||--o{ CREDENTIAL_REPORT : issues

    USER {
        string id PK
        string primary_email
        string primary_phone
        boolean is_professional
        datetime created_at
    }

    SOCIAL_ACCOUNT {
        string id PK
        string user_id FK
        string provider  "google|linkedin|x"
        string provider_user_id
        string provider_email
        boolean email_verified
        datetime linked_at
        datetime last_login_at
    }

    VERIFICATION_REQUEST {
        string id PK
        string user_id FK
        string type "identity|professional|company|ownership|listing"
        string status "submitted|in_review|approved|rejected"
        string reviewer_user_id FK
        datetime submitted_at
        datetime decided_at
    }

    VERIFICATION_DOCUMENT {
        string id PK
        string request_id FK
        string document_id FK
        string purpose
    }

    VERIFICATION_BADGE {
        string id PK
        string badge_type
        datetime issued_at
        datetime expires_at
    }

    CREDENTIAL_ISSUER {
        string id PK
        string name
        string issuer_type "financial|non_financial"
        string verification_method "manual|api_optional"
    }

    CREDENTIAL_REPORT {
        string id PK
        string user_id FK
        string issuer_id FK
        string document_id FK
        string report_type
        datetime issued_at
        datetime verified_at
    }
</div>

<h3 id="114-community-contacts-content-erd-p2-addendum">11.4 Community, Contacts &amp; Content ERD (P2 Addendum)</h3>
<div class="mermaid my-8">
erDiagram
    USER ||--o{ FOLLOW : follows
    USER ||--o{ CONNECTION_REQUEST : requests
    GROUP ||--o{ GROUP_MEMBERSHIP : has
    USER ||--o{ GROUP_MEMBERSHIP : joins
    PAGE ||--o{ PAGE_FOLLOW : followed_by
    USER ||--o{ PAGE_FOLLOW : follows
    USER ||--o{ POST : creates
    POST ||--o{ POST_COMMENT : has
    POST ||--o{ POST_REACTION : has

    USER ||--o{ BLOG : writes
    USER ||--o{ VIDEO : uploads

    USER {
        string id PK
        string display_name
    }

    FOLLOW {
        string id PK
        string follower_user_id FK
        string following_user_id FK
        datetime created_at
    }

    CONNECTION_REQUEST {
        string id PK
        string from_user_id FK
        string to_user_id FK
        string status "pending|accepted|rejected|blocked"
        datetime created_at
    }

    GROUP {
        string id PK
        string name
        string visibility "public|private"
    }

    GROUP_MEMBERSHIP {
        string id PK
        string group_id FK
        string user_id FK
        string role "member|admin"
        datetime joined_at
    }

    PAGE {
        string id PK
        string name
        string owner_user_id FK
    }

    PAGE_FOLLOW {
        string id PK
        string page_id FK
        string user_id FK
        datetime created_at
    }

    POST {
        string id PK
        string author_user_id FK
        string entity_type "user|group|page"
        string entity_id
        string text
        datetime created_at
    }

    POST_COMMENT {
        string id PK
        string post_id FK
        string user_id FK
        string text
        datetime created_at
    }

    POST_REACTION {
        string id PK
        string post_id FK
        string user_id FK
        string reaction_type
        datetime created_at
    }

    BLOG {
        string id PK
        string author_user_id FK
        string title
        string status "draft|review|published"
        datetime published_at
    }

    VIDEO {
        string id PK
        string author_user_id FK
        string title
        string status "draft|review|published"
        datetime published_at
    }
</div>

<h2 id="12-transaction-step-tracking_1">12. Transaction Step Tracking</h2>
<h3 id="121-offer-state-machine">12.1 Offer State Machine</h3>
<div class="mermaid my-8">
stateDiagram-v2
    [*] --> SUBMITTED
    SUBMITTED --> COUNTERED: seller_counter
    COUNTERED --> COUNTERED: buyer_or_seller_counter
    SUBMITTED --> ACCEPTED: seller_accept
    COUNTERED --> ACCEPTED: buyer_accept
    SUBMITTED --> REJECTED: seller_reject
    COUNTERED --> REJECTED: buyer_or_seller_reject
    SUBMITTED --> WITHDRAWN: buyer_withdraw
    COUNTERED --> WITHDRAWN: buyer_withdraw
    ACCEPTED --> [*]
    REJECTED --> [*]
    WITHDRAWN --> [*]
</div>

<h3 id="122-transaction-state-machine-buysell">12.2 Transaction State Machine (Buy/Sell)</h3>
<div class="mermaid my-8">
stateDiagram-v2
    [*] --> INITIATED
    INITIATED --> DOCS_PENDING: offer_accepted
    DOCS_PENDING --> LEGAL_REVIEW: docs_uploaded
    LEGAL_REVIEW --> FINANCE_PROCESSING: loan_requested
    LEGAL_REVIEW --> PAYMENT_PENDING: no_loan
    FINANCE_PROCESSING --> PAYMENT_PENDING: loan_approved_or_cash_ready
    PAYMENT_PENDING --> IN_PROGRESS: token_or_payment_confirmed
    IN_PROGRESS --> COMPLETED: dalil_uploaded_and_handover_confirmed
    INITIATED --> CANCELLED: cancel
    DOCS_PENDING --> CANCELLED: cancel
    LEGAL_REVIEW --> CANCELLED: cancel
    FINANCE_PROCESSING --> CANCELLED: cancel
    PAYMENT_PENDING --> CANCELLED: cancel
    IN_PROGRESS --> CANCELLED: cancel
    COMPLETED --> [*]
    CANCELLED --> [*]
</div>

<h3 id="123-transaction-state-machine-rent">12.3 Transaction State Machine (Rent)</h3>
<div class="mermaid my-8">
stateDiagram-v2
    [*] --> INITIATED
    INITIATED --> DOCS_PENDING: offer_accepted
    DOCS_PENDING --> PAYMENT_PENDING: lease_terms_confirmed
    PAYMENT_PENDING --> IN_PROGRESS: deposit_or_rent_paid
    IN_PROGRESS --> COMPLETED: handover_confirmed
    INITIATED --> CANCELLED: cancel
    DOCS_PENDING --> CANCELLED: cancel
    PAYMENT_PENDING --> CANCELLED: cancel
    IN_PROGRESS --> CANCELLED: cancel
    COMPLETED --> [*]
    CANCELLED --> [*]
</div>

<h3 id="124-bd-transaction-step-checklist-bayna-dalil-namjari-tax">12.4 BD Transaction Step Checklist (Bayna → Dalil → Namjari → Tax)</h3>
<p>This checklist is an <strong>explicit, user-visible step list</strong> (timeline) for Bangladesh property transactions.<br />
It complements the state machines above and operationalizes <strong>proof uploads per step</strong> (see FR-32) and <strong>official portal reference capture</strong> (see FR-66–69).</p>
<blockquote>
<p>Notes:<br />
- The platform does <strong>not</strong> need to integrate directly with government systems for MVP.<br />
- Instead, MSC Home supports link-outs + guided data capture + evidence uploads.</p>
</blockquote>
<ol>
<li>
<p><strong>Offer Accepted / Deal Initiated</strong></p>
<ul>
<li>Output: Transaction record created; parties identified.</li>
<li>Evidence: Offer acceptance record (system).</li>
</ul>
</li>
<li>
<p><strong>Document Collection Started</strong></p>
<ul>
<li>Seller uploads initial documents into <strong>Document Vault</strong>.</li>
<li>Evidence: Deed copy (Dalil) (if available), prior mutation (Namjari) copy (if exists), tax receipts/DCR (if exists), photos, utility/service-charge info.</li>
</ul>
</li>
<li>
<p><strong>Ownership &amp; Listing Information Verification</strong></p>
<ul>
<li>Verification may be: platform/manual review, field verification, and/or optional e-KYC for identity.</li>
<li>Evidence: Verified Listing badge status + verifier notes + uploaded proofs.</li>
</ul>
</li>
<li>
<p><strong>Bayna / Baina Nama (Agreement to Sell) Prepared &amp; Signed (if applicable)</strong></p>
<ul>
<li>Output: Parties agree on price, terms, and schedule.</li>
<li>Evidence: Bayna agreement copy (uploaded) + counterparty confirmation.</li>
</ul>
</li>
<li>
<p><strong>Legal Review / Due Diligence Completed</strong></p>
<ul>
<li>Output: Lawyer/legal agent provides vetting report (title check, document consistency, risk flags).</li>
<li>Evidence: Legal report document + checklist completion log.</li>
</ul>
</li>
<li>
<p><strong>Payment / Token / Booking Money (if applicable)</strong></p>
<ul>
<li>Output: Payment intent created; gateway checkout completed.</li>
<li>Evidence: Gateway validation success + receipt; if risk flagged then HOLD per BR-26.</li>
</ul>
</li>
<li>
<p><strong>Dalil (Registered Deed) Completed</strong></p>
<ul>
<li>Output: Deed registration completed at Sub-Registrar.</li>
<li>Evidence: Registered Dalil copy (uploaded) + transaction step confirmation.</li>
</ul>
</li>
<li>
<p><strong>Namjari (Mutation) Application Submitted (Portal-assisted)</strong></p>
<ul>
<li>User action: Use official mutation portal link-out; submit application.</li>
<li>Platform action: Capture reference(s) (application number, mobile used) and store in timeline.</li>
<li>Evidence: Portal reference capture + screenshots/receipts + later status snapshot.</li>
</ul>
</li>
<li>
<p><strong>Namjari (Mutation) Approved / Khatian Updated</strong></p>
<ul>
<li>Output: Mutation/khatiyan result received.</li>
<li>Evidence: QR-coded khatian/related document upload + user-entered status snapshot (timestamped).</li>
</ul>
</li>
<li>
<p><strong>Land Development Tax (ভূমি উন্নয়ন কর) Holding / Payment (as applicable)</strong></p>
<ul>
<li>User action: Use official tax portal link-out to register holding/pay tax.</li>
<li>Platform action: Capture holding reference/DCR reference + upload receipt.</li>
<li>Evidence: Tax receipt/DCR uploaded + reference metadata stored.</li>
</ul>
</li>
<li>
<p><strong>Handover Completed</strong></p>
<ul>
<li>Output: Keys/possession transferred; handover checklist completed.</li>
<li>Evidence: Handover confirmation (both parties) + optional photos.</li>
</ul>
</li>
<li>
<p><strong>Transaction Closed &amp; Reviews Enabled</strong></p>
<ul>
<li>Output: Parties can rate/review each other and (optionally) the listing/agent.</li>
<li>Evidence: Review gating enforced (BR-20/BR-21).</li>
</ul>
</li>
</ol>
<h4 id="1241-bd-transaction-step-workflow-diagram">12.4.1 BD Transaction Step Workflow Diagram</h4>
<div class="mermaid my-8">
flowchart TD
    START([Offer Accepted]) --> S1[📋 Step 1: Deal Initiated]
    S1 --> S2[📁 Step 2: Document Collection]
    S2 --> S3[✅ Step 3: Ownership Verification]
    S3 --> S4{Bayna Required?}
    S4 -->|Yes| S4A[📝 Step 4: Bayna Signed]
    S4 -->|No| S5
    S4A --> S5[⚖️ Step 5: Legal Review]
    S5 --> S6[💰 Step 6: Payment/Token Money]
    S6 --> S7[📄 Step 7: Dalil Registration]
    S7 --> S8[🏛️ Step 8: Namjari Submission]
    S8 --> S8A[Portal Link-out]
    S8A --> S8B[Capture Reference]
    S8B --> S9[✅ Step 9: Namjari Approved]
    S9 --> S10{Tax Payment<br/>Required?}
    S10 -->|Yes| S10A[💳 Step 10: Land Tax Payment]
    S10 -->|No| S11
    S10A --> S10B[Portal Link-out]
    S10B --> S10C[Upload Receipt]
    S10C --> S11[🏠 Step 11: Handover Complete]
    S11 --> S12[⭐ Step 12: Transaction Closed]
    S12 --> END([Reviews Enabled])

    style S1 fill:#e1f5e1
    style S7 fill:#fff4e1
    style S8 fill:#e1f0ff
    style S9 fill:#e1f0ff
    style S10A fill:#ffe1e1
    style S11 fill:#f0e1ff
    style S12 fill:#e1ffe1
</div>

<hr />
<h2 id="13-diagrams-erdstatesequenceflow">13. Diagrams (ERD/State/Sequence/Flow)</h2>
<h3 id="131-listing-lifecycle-draft-review-publish">13.1 Listing Lifecycle (Draft → Review → Publish)</h3>
<div class="mermaid my-8">
stateDiagram-v2
    [*] --> DRAFT
    DRAFT --> SUBMITTED: submit_for_review
    SUBMITTED --> UNDER_REVIEW: queued
    UNDER_REVIEW --> PUBLISHED: approve
    UNDER_REVIEW --> CHANGES_REQUESTED: request_changes
    UNDER_REVIEW --> REJECTED: reject

    CHANGES_REQUESTED --> DRAFT: edit
    CHANGES_REQUESTED --> SUBMITTED: resubmit

    PUBLISHED --> PAUSED: pause
    PAUSED --> PUBLISHED: resume
    PUBLISHED --> UNDER_REVIEW: reverification_trigger
    PUBLISHED --> ARCHIVED: archive
    PAUSED --> ARCHIVED: archive

    REJECTED --> ARCHIVED: archive
    ARCHIVED --> [*]
</div>

<h3 id="132-verification-flow-user-adminverifier-badge">13.2 Verification Flow (User → Admin/Verifier → Badge)</h3>
<div class="mermaid my-8">
sequenceDiagram
    autonumber
    actor User
    participant UI as Web/App UI
    participant API as Backend API
    participant D as Document Store
    participant V as Verification Service
    actor Admin as Verifier/Admin

    User->>UI: Upload docs + submit verification
    UI->>API: POST /verification-requests + files
    API->>D: Store documents
    D-->>API: Document references
    API->>V: Create request (PENDING)
    V-->>API: RequestCreated
    API-->>UI: Status=PENDING

    Admin->>UI: Review pending requests
    UI->>API: GET /admin/verification-requests?status=PENDING
    API->>V: List pending
    V-->>API: Requests
    API-->>UI: Show queue

    Admin->>UI: Approve/Reject with reason
    UI->>API: PATCH /admin/verification-requests/{id}
    API->>V: Update status + write audit log
    V-->>API: Updated
    API-->>UI: Verified badge enabled
</div>

<h3 id="133-payment-flow-gateway-otp3ds">13.3 Payment Flow (Gateway + OTP/3DS)</h3>
<div class="mermaid my-8">
sequenceDiagram
    autonumber
    actor Buyer
    participant UI as Web/App UI
    participant API as Backend API
    participant O as Order Service
    participant P as Payment Service
    participant GW as Payment Gateway

    Buyer->>UI: Click Pay (card/e-banking)
    UI->>API: POST /orders/{id}/payments {method}
    API->>O: Validate order is payable
    O-->>API: OK
    API->>P: Create payment intent (PENDING)
    P->>GW: Initiate payment
    GW-->>P: Requires OTP/3DS
    P-->>API: Payment requires customer action
    API-->>UI: Show OTP/3DS step (gateway UI)
    Buyer->>UI: Complete OTP/3DS
    UI->>API: POST /payments/{id}/confirm
    API->>P: Confirm result with gateway
    P->>GW: Verify/capture
    GW-->>P: Success/Fail
    P-->>API: Payment SUCCESS/FAILED
    API-->>UI: Receipt + update transaction step
</div>

<h3 id="134-system-context-external-integrations">13.4 System Context (External Integrations)</h3>
<div class="mermaid my-8">
graph TB
    subgraph Users["👥 Platform Users"]
        Buyer[Buyer/Renter]
        Seller[Seller/Owner]
        Agent[Real Estate Agent]
        Legal[Legal Agent]
        Financial[Financial Agent]
        Service[Service Provider]
        Social[Social User]
        Admin[Admin/Moderator]
    end

    subgraph Clients["📱 Client Applications"]
        Web[Web Application]
        iOS[iOS App]
        Android[Android App]
    end

    subgraph Platform["🏢 MSC Home Platform"]
        API[API Gateway]
        Auth[Auth Service]
        Listing[Listing Service]
        Transaction[Transaction Service]
        Payment[Payment Service]
        Chat[Chat Service]
        DB[(Database)]
        Cache[(Redis Cache)]
        Storage[(Media Storage)]
    end

    subgraph External["🔌 External Services"]
        OAuth[OAuth Providers]
        SMS[SMS/Email Provider]
        Maps[Maps API]
        eKYC[eKYC Service]
        Gateway[Payment Gateway]
        Video[Video SDK]
        Gov[Government Portals]
        Credential[Credential Issuers]
    end

    Buyer --> Web
    Buyer --> iOS
    Buyer --> Android
    Seller --> Web
    Seller --> iOS
    Seller --> Android
    Agent --> Web
    Agent --> iOS
    Agent --> Android
    Legal --> Web
    Financial --> Web
    Service --> Web
    Social --> Web
    Admin --> Web

    Web --> API
    iOS --> API
    Android --> API

    API --> Auth
    API --> Listing
    API --> Transaction
    API --> Payment
    API --> Chat

    Auth --> DB
    Listing --> DB
    Transaction --> DB
    Payment --> DB
    Chat --> DB

    Auth --> Cache
    Listing --> Cache

    Listing --> Storage

    Auth --> OAuth
    Auth --> SMS
    Listing --> Maps
    Auth --> eKYC
    Payment --> Gateway
    Chat --> Video
    Transaction --> Gov
    Auth --> Credential
</div>

<h3 id="135-hosted-checkout-ipn-validation-sslcommerz-style">13.5 Hosted Checkout + IPN + Validation (SSLCOMMERZ-style)</h3>
<div class="mermaid my-8">
sequenceDiagram
    autonumber
    actor Buyer
    participant UI as Web/Mobile UI
    participant API as MSC Home Backend
    participant GW as Payment Gateway
    participant IPN as IPN Listener Endpoint
    participant VAL as Validation API

    Buyer->>UI: Click Pay
    UI->>API: Create payment intent (orderId, amount)
    API->>GW: Create session (success/fail/cancel + ipn_url)
    GW-->>API: Return session + redirect URL
    API-->>UI: Redirect buyer to hosted checkout
    UI->>GW: Buyer completes checkout

    GW-->>IPN: POST payment notification (status + identifiers)
    IPN->>API: Forward/queue notification for processing
    API->>VAL: Validate transaction (status + amount + currency + ids)
    VAL-->>API: Validation response
    API-->>API: If valid & not risky -> mark order PAID
    API-->>API: If risky -> mark order HOLD (manual verification required)

    GW-->>UI: Redirect to success/fail/cancel callback
    UI->>API: Fetch final payment status
    API-->>UI: Show receipt or next steps
</div>

<h3 id="136-dispute-lifecycle-state-diagram">13.6 Dispute Lifecycle (State Diagram)</h3>
<div class="mermaid my-8">
stateDiagram-v2
    [*] --> OPEN
    OPEN --> NEEDS_INFO: request_more_info
    NEEDS_INFO --> OPEN: submit_evidence

    OPEN --> UNDER_REVIEW: support_triage
    UNDER_REVIEW --> MEDIATION: propose_resolution
    UNDER_REVIEW --> ESCALATED: escalate_admin

    MEDIATION --> RESOLVED_REFUND: refund_approved
    MEDIATION --> RESOLVED_NO_REFUND: refund_denied
    ESCALATED --> RESOLVED_REFUND: refund_approved
    ESCALATED --> RESOLVED_NO_REFUND: refund_denied

    RESOLVED_REFUND --> [*]
    RESOLVED_NO_REFUND --> [*]
</div>

<h3 id="137-document-vault-access-decision-flow">13.7 Document Vault Access Decision (Flow)</h3>
<div class="mermaid my-8">
flowchart TD
    R[Request document access] --> A{Logged in?}
    A -- No --> D0[Denied]
    A -- Yes --> B{Owner or participant?}
    B -- Yes --> ALLOW1[Allow per policy]
    B -- No --> C{Has access grant?}
    C -- No --> REQ[Create access request]
    C -- Yes --> E{Grant expired/revoked?}
    E -- Yes --> D1[Denied]
    E -- No --> ALLOW2[Allow watermarked preview]

    ALLOW1 --> LOG[Log access]
    ALLOW2 --> LOG
    REQ --> LOGREQ[Log request]
</div>

<h3 id="138-notification-delivery-sequence">13.8 Notification Delivery (Sequence)</h3>
<div class="mermaid my-8">
sequenceDiagram
    autonumber
    participant Svc as Domain Service
    participant Bus as Event Bus
    participant Notif as Notification Service
    participant Q as Outbound Queue
    participant SMS as SMS Provider
    participant Email as Email Provider
    participant UI as App UI

    Svc->>Bus: Publish event
    Bus->>Notif: Deliver event
    Notif->>Notif: Resolve recipients + preferences
    Notif->>UI: Create in-app notification
    Notif->>Q: Enqueue outbound messages
    par SMS
        Q->>SMS: Send SMS
        SMS-->>Q: Accepted/Failed
    and Email
        Q->>Email: Send Email
        Email-->>Q: Accepted/Failed
    end
    Notif->>Notif: Retry/backoff on failures (P1)
</div>

<h3 id="139-portal-tracking-assistance-manual-link-out">13.9 Portal Tracking Assistance (Manual Link-Out)</h3>
<div class="mermaid my-8">
sequenceDiagram
    autonumber
    actor User
    participant UI as MSC Home UI
    participant API as Backend API
    participant Portal as Official Portal (external)

    User->>UI: Open transaction step "Check portal status"
    UI->>Portal: Open portal link (new tab)
    Note over UI,Portal: User completes portal captcha manually\nNo automation by MSC Home
    User->>UI: Enter reference + status text\nUpload screenshot/PDF if needed
    UI->>API: Save reference + status snapshot
    API-->>UI: Snapshot saved + timestamp
</div>

<hr />
<h3 id="1310-use-case-diagram-core-platform-features">13.10 Use Case Diagram - Core Platform Features</h3>
<div class="mermaid my-8">
graph LR
    Buyer([👤 Buyer])
    Seller([👤 Seller])
    Agent([👤 Agent])
    Legal([⚖️ Legal Agent])
    Financial([💰 Financial Agent])
    Admin([👨‍💼 Admin])

    subgraph Authentication["🔐 Authentication"]
        UC1[Register & Login]
        UC2[Switch Professional Mode]
        UC3[Submit Verification]
        UC4[Manage Profile]
    end

    subgraph Marketplace["🏘️ Marketplace"]
        UC5[Create Listing]
        UC6[Search Properties]
        UC7[View Listing Details]
        UC8[Save Favorites]
        UC9[Request Document Access]
    end

    subgraph Communication["💬 Communication"]
        UC10[Chat with Parties]
        UC11[Book Appointment]
        UC12[Audio/Video Call]
    end

    subgraph Transactions["💳 Transactions"]
        UC13[Submit Offer]
        UC14[Negotiate Terms]
        UC15[Track Transaction Steps]
        UC16[Upload Step Proofs]
        UC17[Make Payment]
    end

    subgraph Support["🤝 Support Services"]
        UC18[Find Legal Agent]
        UC19[Book Legal Service]
        UC20[Find Financial Agent]
        UC21[Request Loan Assistance]
    end

    subgraph Reviews["⭐ Reviews"]
        UC22[Submit Review]
        UC23[Respond to Review]
    end

    subgraph Administration["⚙️ Administration"]
        UC24[Approve Verification]
        UC25[Moderate Listings]
        UC26[Resolve Disputes]
        UC27[Manage Users]
    end

    Buyer --> UC1
    Buyer --> UC6
    Buyer --> UC7
    Buyer --> UC8
    Buyer --> UC10
    Buyer --> UC11
    Buyer --> UC13
    Buyer --> UC17
    Buyer --> UC18
    Buyer --> UC20
    Buyer --> UC22

    Seller --> UC1
    Seller --> UC2
    Seller --> UC3
    Seller --> UC5
    Seller --> UC10
    Seller --> UC14
    Seller --> UC23

    Agent --> UC2
    Agent --> UC3
    Agent --> UC5
    Agent --> UC10
    Agent --> UC11
    Agent --> UC14

    Legal --> UC2
    Legal --> UC3
    Legal --> UC18
    Legal --> UC19

    Financial --> UC2
    Financial --> UC3
    Financial --> UC20
    Financial --> UC21

    Admin --> UC24
    Admin --> UC25
    Admin --> UC26
    Admin --> UC27
</div>

<hr />
<h3 id="1311-high-level-architecture-diagram">13.11 High-Level Architecture Diagram</h3>
<div class="mermaid my-8">
graph TB
    subgraph Client["📱 Client Layer"]
        WEB[Web Application]
        ANDROID[Android App]
        IOS[iOS App]
    end

    subgraph Gateway["🚪 API Gateway Layer"]
        APIGW[API Gateway & Load Balancer]
    end

    subgraph Services["⚙️ Application Services"]
        AUTH[Authentication Service]
        USER[User Service]
        LISTING[Listing Service]
        COMM[Communication Service]
        TRANS[Transaction Service]
        PAY[Payment Service]
        DOC[Document Vault]
        NOTIF[Notification Service]
        ADMIN[Admin Service]
    end

    subgraph Data["💾 Data Layer"]
        DB[(PostgreSQL)]
        CACHE[(Redis)]
        SEARCH[(Elasticsearch)]
        QUEUE[(Message Queue)]
    end

    subgraph Storage["📦 Storage Layer"]
        S3[(Object Storage)]
        CDN[CDN]
    end

    subgraph External["🌐 External Services"]
        SMS[SMS Provider]
        EMAIL[Email Service]
        MAPS[Maps API]
        EKYC[eKYC Provider]
        GATEWAY[Payment Gateways]
        VIDEO[Video SDK]
    end

    WEB --> APIGW
    ANDROID --> APIGW
    IOS --> APIGW

    APIGW --> AUTH
    APIGW --> USER
    APIGW --> LISTING
    APIGW --> COMM
    APIGW --> TRANS
    APIGW --> PAY
    APIGW --> DOC
    APIGW --> ADMIN

    AUTH --> DB
    AUTH --> CACHE
    USER --> DB
    USER --> CACHE
    LISTING --> DB
    LISTING --> SEARCH
    LISTING --> S3
    COMM --> DB
    COMM --> QUEUE
    TRANS --> DB
    PAY --> DB
    PAY --> QUEUE
    DOC --> DB
    DOC --> S3
    ADMIN --> DB

    NOTIF --> QUEUE
    NOTIF --> SMS
    NOTIF --> EMAIL

    S3 --> CDN

    PAY --> GATEWAY
    USER --> EKYC
    LISTING --> MAPS
    COMM --> VIDEO
</div>

<hr />
<h3 id="1312-data-flow-diagram-property-search-transaction">13.12 Data Flow Diagram - Property Search &amp; Transaction</h3>
<div class="mermaid my-8">
flowchart TD
    A[🔍 User Initiates Search] --> B[Search Service]
    B --> C{Cache Hit?}
    C -->|Yes| D[✅ Return Cached Results]
    C -->|No| E[Query Elasticsearch]
    E --> F[Apply Filters]
    F --> G[Rank by Accuracy Score]
    G --> H[Fetch from Database]
    H --> I[Load Media from CDN]
    I --> J[Apply Access Control]
    J --> K[📋 Return Results]
    K --> L[Cache Results]

    K --> M[👁️ User Views Listing]
    M --> N[Load Full Details]
    N --> O{Document Access?}
    O -->|Granted| P[📄 Show Documents]
    O -->|Not Granted| Q[🔒 Show Request Button]

    M --> R[💰 User Submits Offer]
    R --> S[Validate Offer]
    S --> T[Create Offer Record]
    T --> U[📧 Notify Seller/Agent]
    U --> V{Seller Action}
    V -->|Accept| W[✅ Create Transaction]
    V -->|Counter| X[🔄 Update Offer]
    V -->|Reject| Y[❌ Close Offer]

    W --> Z[Initialize Timeline]
    Z --> AA[Track Steps]
    AA --> AB[Upload Proofs]
    AB --> AC[Admin Verification]
    AC --> AD[💳 Payment Processing]
    AD --> AE[✅ Complete Transaction]
    AE --> AF[⭐ Enable Reviews]
</div>

<hr />
<h3 id="1313-component-interaction-diagram-verification-flow">13.13 Component Interaction Diagram - Verification Flow</h3>
<div class="mermaid my-8">
sequenceDiagram
    autonumber
    participant User
    participant WebApp as Web/Mobile App
    participant AuthService as Auth Service
    participant UserService as User Service
    participant DocService as Document Service
    participant VerifService as Verification Service
    participant QueueService as Message Queue
    participant NotifService as Notification Service
    participant AdminPortal as Admin Portal
    participant AuditService as Audit Service

    User->>WebApp: Upload verification documents
    WebApp->>AuthService: Validate user session
    AuthService-->>WebApp: Session valid

    WebApp->>DocService: Upload documents (NID, certificates)
    DocService->>DocService: Validate file types & sizes
    DocService->>DocService: Virus scan (optional)
    DocService->>DocService: Store in secure storage
    DocService-->>WebApp: Document IDs

    WebApp->>VerifService: Create verification request
    VerifService->>VerifService: Validate required documents
    VerifService->>VerifService: Create request (PENDING status)
    VerifService->>AuditService: Log verification request created
    VerifService->>QueueService: Queue verification job
    VerifService-->>WebApp: Request ID + status

    QueueService->>NotifService: Trigger notification
    NotifService->>User: Email/SMS confirmation

    QueueService->>AdminPortal: Add to verification queue

    AdminPortal->>VerifService: Admin reviews request
    VerifService->>DocService: Fetch documents
    DocService-->>VerifService: Document URLs

    AdminPortal->>VerifService: Approve/Reject decision
    VerifService->>VerifService: Update status (APPROVED/REJECTED)
    VerifService->>UserService: Update user verified badge
    VerifService->>AuditService: Log decision with reason
    VerifService->>QueueService: Queue outcome notification

    QueueService->>NotifService: Trigger notification
    NotifService->>User: Email/SMS with decision

    User->>WebApp: View profile
    WebApp->>UserService: Fetch user profile
    UserService-->>WebApp: Profile with verified badge
    WebApp-->>User: Display updated profile
</div>

<hr />
<h3 id="1314-deployment-architecture-diagram">13.14 Deployment Architecture Diagram</h3>
<div class="mermaid my-8">
graph TB
    subgraph Users["👥 User Devices"]
        BROWSER[Web Browsers]
        MOBILE[Mobile Apps]
    end

    subgraph Edge["🌐 CDN & Edge"]
        CF[Cloudflare CDN]
        WAF[Web Application Firewall]
    end

    subgraph LB["⚖️ Load Balancer"]
        NGINX[NGINX Load Balancer]
        SSL[SSL/TLS Termination]
    end

    subgraph K8s["☸️ Kubernetes Cluster"]
        subgraph Frontend["Frontend Pods"]
            WEB1[Web App Pod 1]
            WEB2[Web App Pod 2]
        end

        subgraph API["API Services Pods"]
            API1[API Gateway 1]
            API2[API Gateway 2]
            AUTH1[Auth Service]
            USER1[User Service]
            LIST1[Listing Service]
            PAY1[Payment Service]
        end

        subgraph Workers["Background Workers"]
            WORKER1[Notification Worker]
            WORKER2[Payment Worker]
            WORKER3[Search Indexer]
        end
    end

    subgraph DB["💾 Database Cluster"]
        DBPRIMARY[(Primary PostgreSQL)]
        DBREPLICA1[(Read Replica 1)]
        DBREPLICA2[(Read Replica 2)]
    end

    subgraph Cache["⚡ Cache & Queue"]
        REDIS[(Redis Cluster)]
        RABBIT[RabbitMQ]
    end

    subgraph Search["🔍 Search"]
        ELASTIC[(Elasticsearch)]
    end

    subgraph Storage["📦 Object Storage"]
        S3[(S3 / MinIO)]
    end

    subgraph Ext["🔌 External Services"]
        PAYMENT[Payment Gateways]
        SMS[SMS Gateway]
        EMAIL[Email Service]
    end

    subgraph Backup["💿 Backup & DR"]
        BACKUPS[(Automated Backups)]
        DR[(DR Site)]
    end

    BROWSER --> CF
    MOBILE --> CF
    CF --> WAF
    WAF --> NGINX
    NGINX --> SSL
    SSL --> WEB1
    SSL --> WEB2
    WEB1 --> API1
    WEB2 --> API2

    API1 --> AUTH1
    API2 --> AUTH1
    API1 --> USER1
    API1 --> LIST1
    API1 --> PAY1

    AUTH1 --> REDIS
    USER1 --> DBPRIMARY
    LIST1 --> DBPRIMARY
    LIST1 --> ELASTIC
    PAY1 --> DBPRIMARY
    PAY1 --> RABBIT

    DBPRIMARY --> DBREPLICA1
    DBPRIMARY --> DBREPLICA2

    USER1 --> DBREPLICA1
    LIST1 --> DBREPLICA1

    WORKER1 --> RABBIT
    WORKER2 --> RABBIT
    WORKER3 --> RABBIT

    WORKER1 --> SMS
    WORKER1 --> EMAIL
    WORKER2 --> PAYMENT
    WORKER3 --> ELASTIC

    LIST1 --> S3
    CF --> S3

    DBPRIMARY --> BACKUPS
    DBPRIMARY --> DR
</div>

<hr />
<h2 id="14-non-functional-requirements-nfr_1">14. Non-Functional Requirements (NFR)</h2>
<h3 id="141-security">14.1 Security</h3>
<ul>
<li>TLS everywhere; encryption at rest for sensitive documents.</li>
<li>RBAC on all endpoints.</li>
<li>Audit logs for verification, admin actions, and payments.</li>
<li>Signed URL access for document downloads.</li>
</ul>
<p>Additional security requirements (implementation-oriented):<br />
- Strong authentication defaults: password policy, OTP rate limits, brute-force protection.<br />
- Session security: refresh token rotation, device/session revocation (FR-75), and suspicious login alerts.<br />
- File security: virus/malware scanning for uploads (P1), content-type validation, size limits.<br />
- Secrets management: no credentials in clients; rotate API keys; environment-based configs.<br />
- Data minimization: collect only required NID/identity data; avoid storing captcha solutions.</p>
<h3 id="142-performance">14.2 Performance</h3>
<ul>
<li>Search response target &lt; 2s for typical filters.</li>
<li>Media served via CDN.</li>
</ul>
<h3 id="1421-scalability">14.2.1 Scalability</h3>
<ul>
<li>System must support burst traffic during marketing campaigns and peak hours.</li>
<li>Background jobs (notifications, payment webhooks, media processing) must not block user requests.</li>
</ul>
<h3 id="143-reliability">14.3 Reliability</h3>
<ul>
<li>Payment flow must be retry-safe (idempotency keys).</li>
</ul>
<h3 id="1431-availability-recovery">14.3.1 Availability &amp; Recovery</h3>
<ul>
<li>Define RPO/RTO targets (to be finalized). Suggested baseline: RPO ≤ 24h, RTO ≤ 4h.</li>
<li>Automated backups for primary database and document metadata.</li>
<li>Graceful degradation: if optional providers fail (video SDK, e-KYC), core marketplace remains usable.</li>
</ul>
<h3 id="1432-observability">14.3.2 Observability</h3>
<ul>
<li>Centralized logging with correlation IDs.</li>
<li>Metrics for: search latency, payment success rate, webhook processing lag, notification delivery failures.</li>
<li>Alerting for: payment validation failures, webhook spikes, dead-letter queue growth.</li>
</ul>
<h3 id="144-privacy">14.4 Privacy</h3>
<ul>
<li>Strict access to documents (only owner + verifier + permitted parties).</li>
</ul>
<p>Privacy requirements:<br />
- Explicit user consent for document uploads and sharing.<br />
- Support user data export/delete requests where legally appropriate.<br />
- Redact sensitive information in logs (NID, bank details, document URLs).</p>
<h3 id="145-accessibility-localization">14.5 Accessibility &amp; Localization</h3>
<ul>
<li>Support Bangla and English UI text (P1); store user locale preference.</li>
<li>Ensure WCAG-friendly UI for core flows (search, listing view, chat, checkout).</li>
</ul>
<hr />
<h2 id="15-appendices-traceability-glossary">15. Appendices (Traceability &amp; Glossary)</h2>
<h3 id="151-technical-standards-compliance">15.1 Technical Standards &amp; Compliance</h3>
<p><strong>SRS Documentation Standards:</strong><br />
- ✅ IEEE 830-1998 Software Requirements Specification template<br />
- ✅ ISO/IEC/IEEE 29148:2018 Systems and software engineering requirements<br />
- ✅ Clear separation of functional and non-functional requirements<br />
- ✅ Traceability matrix for requirements validation<br />
- ✅ Use of industry-standard diagram notation (Mermaid.js)</p>
<p><strong>Security &amp; Privacy Standards:</strong><br />
- ✅ OWASP Top 10 security considerations<br />
- ✅ Payment Card Industry Data Security Standard (PCI DSS) awareness<br />
- ✅ Secure document handling with encryption at rest and in transit<br />
- ✅ TLS 1.2+ requirement for all communications<br />
- ✅ Audit logging for all sensitive operations</p>
<p><strong>Accessibility Standards:</strong><br />
- ✅ WCAG 2.1 Level AA compliance (recommendation for core flows)<br />
- ✅ Mobile-first responsive design<br />
- ✅ Support for Bangla and English interfaces<br />
- ✅ Clear navigation and user guidance</p>
<p><strong>Performance Standards:</strong><br />
- ✅ Search response time target: &lt; 2 seconds (P95)<br />
- ✅ Payment webhook processing: &lt; 30 seconds<br />
- ✅ API response time: &lt; 500ms (P95) for reads, &lt; 1s for writes<br />
- ✅ System availability: 99.5% uptime for core services<br />
- ✅ Scalability: Support 5,000 concurrent users</p>
<hr />
<h3 id="152-external-references-resources">15.2 External References &amp; Resources</h3>
<p><strong>Bangladesh Government Services:</strong><br />
- Mutation / e-Namjari portal: https://mutation.land.gov.bd/ (status tracking, contact hotline 16122)<br />
- Land record &amp; map services (DLRMS): https://dlrms.land.gov.bd/ (guideline + application tracking)<br />
- DLRMS application tracking: https://dlrms.land.gov.bd/application/search<br />
- Land Development Tax portal: https://portal.ldtax.gov.bd/ (holding registration prerequisites and manuals)</p>
<p><strong>Payment Gateway Integration:</strong><br />
- SSLCOMMERZ Developer Documentation: https://developer.sslcommerz.com/<br />
- SSLCOMMERZ API v4: https://developer.sslcommerz.com/doc/v4/<br />
- bKash Merchant Integration: https://developer.bkash.com/<br />
- Nagad Merchant API: https://developer.nagad.com.bd/</p>
<p><strong>Verification &amp; eKYC Services:</strong><br />
- Porichoy (National ID Verification): https://porichoy.gov.bd/<br />
- Urban Development Directorate (URA Certificate Verification): https://rajuk.gov.bd/</p>
<p><strong>Technical References:</strong><br />
- Bangladesh National Portal: https://bangladesh.gov.bd/<br />
- ICT Division, Bangladesh: https://ictd.gov.bd/<br />
- Bangladesh Bank (Payment System Guidelines): https://www.bb.org.bd/</p>
<p><strong>Industry Best Practices:</strong><br />
- Real Estate Information System (REIS) Guidelines<br />
- Property Technology (PropTech) Standards<br />
- Digital Transaction Security Best Practices</p>
<hr />
<h3 id="153-glossary-of-terms">15.3 Glossary of Terms</h3>
<p><strong>General Real Estate Terms:</strong><br />
- <strong>Listing:</strong> A property advertised for sale or rent on the platform<br />
- <strong>Verified Listing:</strong> A listing that has passed ownership and information verification checks<br />
- <strong>Accuracy Score:</strong> Completeness percentage of listing information (required + optional fields)<br />
- <strong>Transaction:</strong> The complete process from offer acceptance to property handover<br />
- <strong>Step Tracking:</strong> Monitoring progress of transaction milestones with proof documentation</p>
<p><strong>Bangladesh-Specific Terms:</strong><br />
- <strong>Bayna / Baina Nama:</strong> Sale agreement or agreement to sell, legally binding document in BD property transactions<br />
- <strong>Dalil:</strong> Registered deed document obtained from Sub-Registrar office, proves property ownership<br />
- <strong>Namjari (Mutation):</strong> Legal process of updating ownership records in government land records after property transfer<br />
- <strong>Khatian:</strong> Land record document showing ownership details, plot number, and boundaries<br />
- <strong>Mouza:</strong> Administrative land unit in Bangladesh, used in property identification<br />
- <strong>Dag:</strong> Plot number within a Mouza, part of property identification system<br />
- <strong>DCR (Dhaka City Corporation Receipt):</strong> Tax receipt from city corporation for urban properties<br />
- <strong>URA (Urban Development Authority):</strong> Regulatory body for real estate agents in Bangladesh (e.g., RAJUK in Dhaka)<br />
- <strong>TIN (Taxpayer Identification Number):</strong> Tax identification for businesses<br />
- <strong>BIN (Business Identification Number):</strong> Business registration identifier<br />
- <strong>Katha:</strong> Traditional land measurement unit (1 Katha = 720 sqft in Bangladesh)<br />
- <strong>Decimal:</strong> Land measurement unit (1 Decimal = 435.6 sqft)<br />
- <strong>Shotok:</strong> Smallest land measurement unit (1 Shotok = 7.26 sqft)</p>
<p><strong>Technical Terms:</strong><br />
- <strong>RBAC (Role-Based Access Control):</strong> Permission system based on user roles<br />
- <strong>ABAC (Attribute-Based Access Control):</strong> Permission system based on user attributes and relationships<br />
- <strong>KYC (Know Your Customer):</strong> Identity verification process<br />
- <strong>eKYC (Electronic KYC):</strong> Digital identity verification using government databases<br />
- <strong>OTP (One-Time Password):</strong> Temporary password sent via SMS/Email for verification<br />
- <strong>3DS (3-Domain Secure):</strong> Additional security layer for card payments<br />
- <strong>IPN (Instant Payment Notification):</strong> Real-time payment status update from payment gateway<br />
- <strong>Idempotency:</strong> Ensuring duplicate requests don't cause multiple operations<br />
- <strong>CDN (Content Delivery Network):</strong> Distributed server network for fast content delivery</p>
<p><strong>Platform-Specific Terms:</strong><br />
- <strong>Verified Badge:</strong> Visual indicator on user profile showing successful verification<br />
- <strong>Professional Mode:</strong> Account type for business users (agents, lawyers, financial advisors)<br />
- <strong>Document Vault:</strong> Secure storage for sensitive property and identity documents<br />
- <strong>Access Grant:</strong> Time-bound permission to view specific documents<br />
- <strong>Watermark:</strong> Visible identifier on documents showing viewer information and timestamp<br />
- <strong>Accuracy Score:</strong> Calculated completeness percentage for property listings<br />
- <strong>Response SLA:</strong> Expected timeframe for agent/professional to respond to inquiries<br />
- <strong>Transaction Timeline:</strong> Chronological record of all transaction steps and actions<br />
- <strong>Step Proof:</strong> Evidence document uploaded to verify completion of transaction milestone<br />
- <strong>Moderation Queue:</strong> Admin interface for reviewing pending verification/listing requests</p>
<hr />
<h3 id="154-approval-sign-off">15.4 Approval &amp; Sign-Off</h3>
<p><strong>Document Approval:</strong></p>
<table>
<thead>
<tr>
<th>Role</th>
<th>Name</th>
<th>Signature</th>
<th>Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>Product Owner</td>
<td>[Name]</td>
<td>[Signature/Digital Sign]</td>
<td>[DD/MM/YYYY]</td>
</tr>
<tr>
<td>Technical Architect</td>
<td>[Name]</td>
<td>[Signature/Digital Sign]</td>
<td>[DD/MM/YYYY]</td>
</tr>
<tr>
<td>Project Manager</td>
<td>[Name]</td>
<td>[Signature/Digital Sign]</td>
<td>[DD/MM/YYYY]</td>
</tr>
<tr>
<td>Quality Assurance Lead</td>
<td>[Name]</td>
<td>[Signature/Digital Sign]</td>
<td>[DD/MM/YYYY]</td>
</tr>
<tr>
<td>Client Representative</td>
<td>[Name]</td>
<td>[Signature/Digital Sign]</td>
<td>[DD/MM/YYYY]</td>
</tr>
</tbody>
</table>
<p><strong>Document Status:</strong> PENDING APPROVAL (To be updated upon client sign-off)</p>
<hr />
<p><strong>End of Software Requirements Specification</strong></p>
<hr />
<p>© 2026 CodeStorm Hub. All rights reserved. This document is confidential and proprietary.</p>
        </div>
        
        <!-- Footer with print button -->
        <div class="a4-page no-print text-center py-8">
            <button onclick="window.print()" class="print-button">
                📄 Print Document
            </button>
            <p class="mt-4 text-gray-600">Click the button above to print or save as PDF</p>
        </div>
    </div>
    
    <!-- Initialize Mermaid -->
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#dbeafe',
                primaryTextColor: '#1e3a8a',
                primaryBorderColor: '#3b82f6',
                lineColor: '#60a5fa',
                secondaryColor: '#f0f9ff',
                tertiaryColor: '#f8fafc',
                fontSize: '14px'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>